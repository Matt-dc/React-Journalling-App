(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(26),s=a.n(r),c=(a(82),a(12)),o=a(7),i=a(8),m=a(10),u=a(9),d=a(11),p=a(145),h=a(148),g=a(147),E=a(2),f=a.n(E),v=l.a.createContext(),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).updateUser=function(e){a.setState(e)},a.state={topics:[{topic:"Tech",image:"tech.jpeg",value:"tech"},{topic:"Language",image:"language.jpeg",value:"language"},{topic:"Science",image:"science.jpeg",value:"science"},{topic:"Self",image:"self.jpeg",value:"self"},{topic:"Society",image:"society.jpeg",value:"society"},{topic:"Music",image:"music.jpeg",value:"music"},{topic:"Geography",image:"geography.jpeg",value:"geogeography"},{topic:"Code",image:"code.jpeg",value:"code"},{topic:"Nature",image:"nature.jpeg",value:"nature"},{topic:"Health",image:"health.jpeg",value:"health"},{topic:"Psych",image:"psych.png",value:"psych"},{topic:"Food",image:"food.jpeg",value:"food"},{topic:"Relationships",image:"relationships.jpeg",value:"relationships"},{topic:"Art",image:"art.jpeg",value:"art"},{topic:"Movies",image:"movies.jpeg",value:"movies"}]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(v.Provider,{value:{isAuth:this.state.isAuth,updateUser:this.updateUser,userId:this.state.userId,avatarImage:this.state.avatarImage,username:this.state.username,topics:this.state.topics}},this.props.children)}}]),t}(n.Component),b=v.Consumer,w=function(e){return function(t){return l.a.createElement(b,null,function(a){var n=a.isAuth,r=a.updateUser,s=a.userId,c=a.username,o=a.avatarImage,i=a.author;return l.a.createElement(e,Object.assign({},t,{isAuth:n,userId:s,avatarImage:o,username:c,author:i,updateUser:r}))})}},S=a(136),k=a(137),N=a(71);function I(e){return l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"spinner"},l.a.createElement(N.a,null,l.a.createElement("div",{className:" ".concat(e.spinning)},l.a.createElement("i",{class:"fa fa-spinner fa-spin fa-".concat(e.size,"x")})))))}var j=a(138);function O(){return l.a.createElement(S.a,null,l.a.createElement(k.a,{style:{margin:"2em 0 0 0",textAlign:"center"}},l.a.createElement(N.a,null,l.a.createElement("h1",{style:{margin:"2em 0 0 0"}},"Oops! It looks like that page doesn't exist :s"),l.a.createElement("h6",{style:{margin:"2em 0 0 0"}},"Try checking the URL or contact us to report a bug"),l.a.createElement(j.a,{href:"/",style:{margin:"3em 0 0 0"}},"Back to home"))))}var C=a(20),L=a(144),A=a(143),x=a(140),H=a(146),T=a(139),P=a(141),F=a(142),U=w(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.props.changeHandler(e)},a.state={email:"",password:"",userId:"",redirect:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.spinner?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):this.props.redirectTo?l.a.createElement(H.a,{to:"/"}):l.a.createElement(P.a,Object.assign({},this.props,{size:"lg"}),l.a.createElement(P.a.Header,{className:"center",style:{margin:"8% 0 2% 0"}},l.a.createElement(N.a,{className:"center"},l.a.createElement("h1",null,"Welcome back!"))),l.a.createElement(P.a.Body,null,l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"show-grid"},l.a.createElement(N.a,{sm:2,md:2}),l.a.createElement(N.a,{className:"center",sm:8,md:8},l.a.createElement("p",{style:{fontSize:"0.9em",color:"#656565",marginBottom:"5%"}},"Stay up to date with all our articles and get our personalized recommendations about all the things that are important to you.")),l.a.createElement(N.a,{sm:2,md:2})),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{sm:6,md:6},l.a.createElement(F.a,{onSubmit:this.props.handleUserLogin},l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Email"),l.a.createElement(F.a.Control,{className:"text-muted",type:"email",id:"email",name:"email",onChange:this.changeHandler,value:this.props.email})),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Password"),l.a.createElement(F.a.Control,{className:"text-muted",type:"password",id:"password",name:"password",onChange:this.changeHandler,value:this.props.password})),l.a.createElement(k.a,{style:{margin:"2% 0"}},l.a.createElement(N.a,{className:"center"},l.a.createElement(j.a,{type:"submit"},"Login"))))),l.a.createElement(N.a,{sm:3,md:3})),l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,{style:{fontSize:"0.8em",margin:"2em 0"}},l.a.createElement(T.a,{to:"/forgotpassword",onClick:function(){return e.props.hideLogin()},style:{color:"#2c4a93"}},"Forgot password?"))),l.a.createElement(k.a,{className:"center",style:{color:"red"}},l.a.createElement(N.a,null,l.a.createElement("p",null,this.props.error))),l.a.createElement(k.a,{style:{margin:"2% 0"}},l.a.createElement(N.a,{className:"center"},l.a.createElement("p",null,"Now account? ",l.a.createElement("span",{onClick:function(t){e.props.hideLogin(),e.props.showSignup()},style:{marginLeft:"1%",color:"#0069d9",cursor:"pointer"}},"Create one")))),l.a.createElement(k.a,{style:{margin:" 5% 0 2% 0",color:"#656565",fontSize:"0.9em"}},l.a.createElement(N.a,{sm:1,md:1}),l.a.createElement(N.a,{sm:10,md:10,className:"center"},"We log user data and share it with service providers to keep our site running. Click \u201cSign in\u201d above to accept  ourTerms of Service and Privacy Policy."),l.a.createElement(N.a,{sm:1,md:1})))))}}]),t}(n.Component)),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.props.changeHandler(e)},a.state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.submitted&&this.props.msg?l.a.createElement(P.a,Object.assign({},this.props,{size:"lg"}),l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,{style:{margin:"4% 0 2% 0"}},l.a.createElement("h1",null,this.props.msg.title))),l.a.createElement(P.a.Body,null,l.a.createElement(k.a,{className:"show-grid center",style:{margin:"8% 0 2% 0"}},l.a.createElement(N.a,null,l.a.createElement("h5",null,this.props.msg.body)))),l.a.createElement(P.a.Footer,null,l.a.createElement(T.a,{className:"link-as-button",onClick:this.props.hideSignup,to:{pathname:this.props.msg.to,state:{email:this.props.email,set:!0}}},this.props.msg.btnTxt))):l.a.createElement(P.a,Object.assign({},this.props,{size:"lg"}),l.a.createElement(P.a.Body,null,l.a.createElement(k.a,{className:"show-grid center",style:{margin:"8% 0 2% 0"}},l.a.createElement(N.a,null,l.a.createElement("h1",null,"Join us!"))),l.a.createElement(k.a,{className:"show-grid"},l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{className:"center",sm:6,md:6},l.a.createElement("p",{style:{fontSize:"0.9em",color:"#656565",marginBottom:"5%"}},"Stay up to date with all our articles and get our personalized recommendations about all the things that are important to you.")),l.a.createElement(N.a,{sm:3,md:3})),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{sm:6,md:6},l.a.createElement(F.a,{onSubmit:this.props.handleUserSignup},l.a.createElement(F.a.Group,{controlId:"formBasicEmail"},l.a.createElement(F.a.Control,{onChange:this.changeHandler,name:"email",value:this.props.email,placeholder:"Enter email"}),l.a.createElement(F.a.Text,{className:"text-muted center"},"We'll never share your email with anyone else.")),l.a.createElement(k.a,null,l.a.createElement(N.a,{className:"center",style:{marginBottom:"3%"}},l.a.createElement(j.a,{variant:"dark",type:"submit"}," ",this.props.sendingEmail?l.a.createElement("span",null,l.a.createElement(I,{spinning:"spinning",size:"1x"})):"Sign up")))),l.a.createElement("p",{style:{color:"red"}},this.state.error))),l.a.createElement(k.a,null,l.a.createElement(N.a,{className:"center"},l.a.createElement("p",{style:{margin:"2% 0 3% 0"}},"Already have an account?",l.a.createElement("span",{onClick:function(t){e.props.hideSignup(),e.props.showLogin()},style:{color:"#0069d9",cursor:"pointer",marginLeft:"1%"}}," Sign in"))))));return this.state.spinner?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):l.a.createElement(l.a.Fragment,null,this.state.confirming?l.a.createElement(I,{size:"8x",spinning:"spinning"}):t)}}]),t}(n.Component),D=w(function(e){return l.a.createElement(P.a,Object.assign({},e,{size:"lg"}),l.a.createElement(P.a.Header,{className:"center",style:{margin:"8% 0 2% 0"}},l.a.createElement(N.a,{className:"center"},l.a.createElement("h1",null,"See you soon!"))),l.a.createElement(P.a.Body,null,l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"center",style:{marginBottom:"5%"}},l.a.createElement(N.a,null,l.a.createElement(x.a,{src:"/assets/goodbye_hand.png",width:"75px"}))),l.a.createElement(k.a,{className:"show-grid"},l.a.createElement(N.a,{sm:2,md:2}),l.a.createElement(N.a,{className:"center",sm:8,md:8},l.a.createElement("p",{style:{fontSize:"0.9em",color:"#656565",marginBottom:"5%"}},"Log in to stay up to date with all our articles and regularly updated content")),l.a.createElement(N.a,{sm:2,md:2})))))});function z(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:"sidebar-item"},l.a.createElement("a",{href:"/profile/".concat(e.fol._id)},l.a.createElement("div",{className:"sidebar-profile-disc"},l.a.createElement(x.a,{src:"/".concat(e.fol.image),height:"50px"})),l.a.createElement("div",{style:{display:"inline"}},e.fol.username))))}function R(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(b,null,function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:e.onHide,className:e.show?"show-overlay dark-overlay":"hide-overlay dark-overlay"}),l.a.createElement("div",{className:e.show?"show-sidebar sidebar":"hide-sidebar sidebar"},l.a.createElement("ul",null,l.a.createElement("li",{className:"sidebar-header",onClick:e.onHide},l.a.createElement("i",{class:"fa fa-bars fa-1x"}),l.a.createElement("img",{className:"sidebar-logo",alt:"",src:"/assets/book.jpg",width:"30",height:"30"}),l.a.createElement("span",{className:"sidebar-brand"},"JournalApp")),t.isAuth?l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:"/userposts"},l.a.createElement("li",{className:"sidebar-item"},l.a.createElement("i",{class:"fa fa-file"}),"Your articles")),l.a.createElement("a",{href:"/followedusers"},l.a.createElement("li",{className:"sidebar-item"},l.a.createElement("i",{class:"fa fa-address-book"}),"Followed users")),l.a.createElement("a",{href:"/savedposts"},l.a.createElement("li",{className:"sidebar-item"},l.a.createElement("i",{class:"fa fa-bookmark"}),"Saved posts")),l.a.createElement("a",{href:"/userhistory"},l.a.createElement("li",{className:"sidebar-item"},l.a.createElement("i",{class:"fa fa-history"}),"Reading history")),l.a.createElement("hr",{className:"sidebar-divider"}),l.a.createElement("h5",{className:"sidebar-subheader"},"FOLLOWING"),e.followedUsers&&e.followedUsers.slice(0,7).map(function(e){return l.a.createElement(z,{fol:e})})):l.a.createElement("div",{className:"login-warning-sidebar-message"},l.a.createElement("p",null,"Sign up or login to follow users and receive personalized content")))))}))}function M(e){return l.a.createElement(P.a,e,l.a.createElement(P.a.Header,null,l.a.createElement(P.a.Title,null,"Login")),l.a.createElement(P.a.Body,null,l.a.createElement("p",null,"Please login first, before liking")),l.a.createElement(P.a.Footer,null,l.a.createElement(j.a,{variant:"secondary",onClick:function(){return e.warnLogin()}},"Close")))}var W=w(function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(C.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(!1),p=Object(C.a)(d,2),h=p[0],g=p[1],E=Object(n.useState)(!1),f=Object(C.a)(E,2),v=(f[0],f[1],function(){return s(!1)}),y=function(){return u(!1)},w=function(){return s(!0)},S=function(){return u(!0)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(b,null,function(t){var a;return l.a.createElement(L.a,{bg:"light",expand:"lg"},l.a.createElement(A.a,null,l.a.createElement(A.a.Link,{onClick:e.toggleSidebar},l.a.createElement("i",{class:"fa fa-bars fa-1x"}))),l.a.createElement(L.a.Brand,(a={className:"ml-auto brand-logo"},Object(c.a)(a,"className","d-inline-block align-top"),Object(c.a)(a,"href","/home"),a),l.a.createElement("img",{alt:"",src:"/assets/book.jpg",width:"30",height:"30"})," JournallingApp "),l.a.createElement(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(L.a.Collapse,{className:"mr-auto"},l.a.createElement(A.a,{className:"mr-auto"},l.a.createElement(A.a.Link,{href:"/home"},"Home"),l.a.createElement(A.a.Link,{href:"/about"},"About"),t.isAuth&&l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a.Link,{href:"/editprofile"},"Edit Profile"),l.a.createElement(A.a.Link,{href:"/createPost"},"Write Something"))),!t.isAuth&&l.a.createElement(A.a,null,l.a.createElement(A.a.Link,{className:"nav-button",onClick:w},"Log in"),l.a.createElement(A.a.Link,{className:"nav-button",onClick:S},"Sign Up")),t.isAuth&&l.a.createElement(A.a,null,l.a.createElement(A.a.Link,{href:"/editProfile",className:"avatar-container"},l.a.createElement("div",{className:"avatar-image-container"},l.a.createElement(x.a,{src:"/".concat(t.avatarImage),width:"70px"})),l.a.createElement("div",{className:"avatar-username"},"Hi, ",t.username)),l.a.createElement(A.a.Link,{className:"logout-button",onClick:function(t){g(!0),e.handleUserLogout()}},"Log out"))))}),l.a.createElement(A.a,{className:"justify-content-center",bg:"light",variant:"light"},l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/tech"},"Tech")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/language"},"Language")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/science"},"Science")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/self"},"Self")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/society"},"Society")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/music"},"Music")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/geography"},"Geography")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/programming"},"Code")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/nature"},"Nature")),l.a.createElement(A.a.Item,null,l.a.createElement(A.a.Link,{href:"/topic/psychology"},"Psych"))),l.a.createElement(U,{show:r,onHide:v,hideLogin:v,showSignup:S,handleUserLogin:e.handleUserLogin,changeHandler:e.changeHandler,error:e.error,redirectTo:e.redirectTo}),l.a.createElement(_,{show:m,onHide:y,hideSignup:y,showLogin:w,handleUserSignup:e.handleUserSignup,changeHandler:e.changeHandler,error:e.error,redirectTo:e.redirectTo,msg:e.msg,email:e.email,submitted:e.submitted,sendingEmail:e.sendingEmail}),l.a.createElement(D,{show:h,onHide:function(){return g(!1)},handleUserLogout:e.handleUserLogout}),l.a.createElement(R,{show:e.showSidebar,onHide:e.toggleSidebar,followedUsers:e.followedUsers}),l.a.createElement(M,{show:e.loginWarning,onHide:e.warnLogin,warnLogin:e.warnLogin}))});function B(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{marginTop:"10%"}}),l.a.createElement(L.a,{bg:"dark",variant:"dark",fixed:"bottom",sticky:"bottom"},l.a.createElement(L.a.Brand,{href:"/home"},l.a.createElement("img",{alt:"",src:"/assets/book.jpg",width:"30",height:"30",className:"d-inline-block align-top"})," Blogging App ")))}function G(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"author-details-container"},l.a.createElement("div",{className:"authorThumbnail-image-container"},l.a.createElement("a",{href:"/profile/".concat(e.post.authorId)},l.a.createElement("img",{src:"/".concat(e.post.authorAvatar),width:"70px"}))),l.a.createElement("div",{className:"author-date-container"},l.a.createElement("div",{style:{marginRight:"2em"}},l.a.createElement("a",{href:"/profile/".concat(e.post.authorId)},l.a.createElement("span",{className:"authorThumbnail-author"},e.post.author))),l.a.createElement("div",null,l.a.createElement("div",{className:"authorThumbnail-date"},l.a.createElement("span",null,e.post.date)),l.a.createElement("div",{className:"authorThumbnail-comments"},l.a.createElement("span",null,"".concat(e.post.comments," comments")))))))}var q=w(function(e){e.savedArticles&&e.isAuth&&l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}});return l.a.createElement(S.a,{style:{margin:"0 0 1em 0",padding:"0"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{lg:5,md:5,sm:5,xs:5},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("div",{className:"crop"},l.a.createElement(x.a,{className:"centerThumbnail-image",src:"/".concat(e.post.image)})))),l.a.createElement(N.a,{lg:7,md:7,sm:7,xs:7},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:10,sm:10},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h5",{className:"centerThumbnail-title"},e.post.title)),l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"centerThumbnail-tagline"},e.post.tagline.substring(0,20),"...")))),l.a.createElement(k.a,null,l.a.createElement(G,{post:e.post})))))}),V=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(S.a,{style:{margin:"1.3em 0"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:8,sm:8},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:11,sm:11},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"personalizedThumbnail-topic"},e.post.topic)),l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h5",{className:"personalizedThumbnail-title"},e.post.title)),l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"personalizedThumbnail-tagline"},e.post.tagline)))),l.a.createElement(k.a,null,l.a.createElement(N.a,{md:5,sm:5},l.a.createElement(T.a,{to:"/profile/".concat(e.post.authorId)},l.a.createElement("p",{className:"personalizedThumbnail-author"},e.post.author)))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/".concat(e.post._id)}," ",l.a.createElement("p",{className:"personalizedThumbnail-date"},e.post.date))),l.a.createElement(N.a,{md:6,sm:6},l.a.createElement("p",{className:"personalizedThumbnail-comments"},"".concat(e.post.comments," comments"))),l.a.createElement(N.a,{md:1},t))),l.a.createElement(N.a,{md:4,sm:4},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("div",{className:"personalizedThumbnail-image-container"},l.a.createElement(x.a,{className:"personalizedThumbnail-image",src:"/".concat(e.post.image)}))))))}),J=function(e){return l.a.createElement(S.a,{style:{margin:"1.3em 0",padding:"0.4em"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:1}),l.a.createElement(N.a,{md:2,sm:2,style:{padding:0}},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("div",null,l.a.createElement(x.a,{className:"followingThumbnail-image",src:"/".concat(e.post.image)})))),l.a.createElement(N.a,{md:8,sm:8},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:11,sm:11},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h5",{className:"followingThumbnail-title"},e.post.title)))),l.a.createElement(k.a,null,l.a.createElement(N.a,{md:5,sm:5},l.a.createElement(T.a,{to:"/profile/".concat(e.post.authorId)},l.a.createElement("p",{className:"followingThumbnail-author"},e.post.author))),l.a.createElement(N.a,null)),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)}," ",l.a.createElement("p",{className:"followingThumbnail-date"},e.post.date))),l.a.createElement(N.a,{md:6,sm:6},l.a.createElement("p",{className:"followingThumbnail-comments"},"".concat(e.post.comments," comments")))))))},Y=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(S.a,{style:{margin:"1.3em 0"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:3,sm:3},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"popularThumbnail-numbered-bullet"},e.index))),l.a.createElement(N.a,{md:8,sm:8},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:11,sm:11},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"popularThumbnail-topic"},e.post.topic)),l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h5",{className:"popularThumbnail-title"},e.post.title)),l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"popularThumbnail-tagline"},e.post.tagline.substring(0,50))))),l.a.createElement(k.a,null,l.a.createElement(N.a,{md:5,sm:5},l.a.createElement(T.a,{to:"/profile/".concat(e.post._id)},l.a.createElement("p",{className:"popularThumbnail-author"},e.post.author))),l.a.createElement(N.a,null),l.a.createElement(N.a,{md:1},t)),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/".concat(e.post._id)}," ",l.a.createElement("p",{className:"popularThumbnail-date"},e.post.date))),l.a.createElement(N.a,{md:6,sm:6},l.a.createElement("p",{className:"popularThumbnail-comments"},l.a.createElement(T.a,{to:"#"},"".concat(e.post.comments," comments"))))))))}),$=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("div",{className:"featuredThumbnail-image-container"},l.a.createElement(x.a,{src:"/".concat(e.post.image),width:"100%"}),l.a.createElement("br",null))))),l.a.createElement(k.a,{style:{margin:"-1em 0 0 0"}},l.a.createElement(N.a,{md:10,sm:10,style:{padding:0}},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h5",{className:"featuredThumbnail-title"},"".concat(e.post.title)))),l.a.createElement(N.a,{md:1},t)),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"featuredThumbnail-tagline"},e.post.tagline.substring(0,25))))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/profile/".concat(e.post.authorId)},l.a.createElement(G,{post:e.post})))))}),Q=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("div",{className:"featuredThumbnail-image-container"},l.a.createElement(x.a,{src:"/".concat(e.post.image),width:"100%"}),l.a.createElement("br",null))))),l.a.createElement(k.a,{style:{margin:"-1em 0 0 0"}},l.a.createElement(N.a,{md:10,sm:10,style:{padding:0}},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h5",{className:"featuredThumbnail-title"},"".concat(e.post.title)))),l.a.createElement(N.a,{md:1},t)),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"featuredThumbnail-tagline"},e.post.tagline.substring(0,25))))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/profile/".concat(e.post.authorId)},l.a.createElement(G,{post:e.post})))))}),K=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={email:"",error:"",sendingEmail:!1},a.changeHandler=function(e){a.setState({email:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.email.replace(/(^\s+|\s+$)/g,"");if(/^\S+@\S+$/.test(t)){a.setState({sendingEmail:!0});var n={email:a.state.email};f.a.post("http://localhost:5000/users/sendemail",n).then(function(e){a.setState({msg:e.data.msg,sendingEmail:!1,submitted:!0})}).catch(function(e){return console.log(e)})}else a.setState({error:"Please enter a valid email"})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.submitted?l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:"show-grid center",style:{margin:"8% 0 2% 0"}},l.a.createElement(N.a,null,l.a.createElement("h3",null,this.state.msg.title),l.a.createElement("h5",null,this.state.msg.body))),l.a.createElement(k.a,{className:"show-grid center",style:{margin:"8% 0 2% 0"}},l.a.createElement(N.a,null))):l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,null),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h2",null,"Stay Posted with the Latest News"))),l.a.createElement(k.a,{style:{margin:"3% 0 4% 0"}},l.a.createElement(N.a,{style:{padding:0,fontSize:"0.9em"}},l.a.createElement("p",null,"Sign up for our personalized feed based on your interests"))),l.a.createElement(k.a,null,l.a.createElement(N.a,{md:7},l.a.createElement(F.a,null,l.a.createElement(F.a.Group,{controlId:"formBasicEmail"},l.a.createElement(F.a.Control,{onChange:this.changeHandler,type:"email",placeholder:"Enter email"}),l.a.createElement(F.a.Text,{className:"text-muted"},"We'll never share your email with anyone else."))),l.a.createElement("p",{style:{color:"red"}},this.state.error),this.state.email),l.a.createElement(N.a,{md:5,sm:6,xs:6},l.a.createElement(j.a,{variant:"dark",onClick:this.handleSubmit}," ",this.state.sendingEmail?l.a.createElement("span",null,l.a.createElement(I,{spinning:"spinning",size:"1x"})):"Sign up"))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:"banner"},l.a.createElement(N.a,{lg:5,md:6,sm:12,xs:12},l.a.createElement(x.a,{src:"assets/workspace.jpg",width:"350px"})),l.a.createElement(N.a,{lg:5,md:6,sm:12,xs:12},e)))}}]),t}(n.Component),X=w(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).toggleSaveHandler=function(e){a.setState({savedArticle:e});var t={toToggle:e,name:"saved_articles"};f.a.put("/users/update/savedArticles/".concat(a.props.userId),t).then(function(e){a.setState({savedArticles:e.data.saved_articles})})},a.state={login:[],posts:[],savedArticles:[],personalized:[],popular:[],following:[],loading:!0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;f.a.get("/posts/getposts").then(function(t){e.setState({posts:t.data,loading:!1})}).catch(function(t){e.setState({loading:!1})})}},{key:"componentDidMount",value:function(){var e=this;f.a.get("/users/").then(function(t){e.setState({username:t.data.user.username,topics:t.data.user.topics,following:t.data.user.following,savedArticles:t.data.user.saved_articles,readingHistory:t.data.user.readingHistory,loading:!1},function(){var t=JSON.stringify(e.state.topics);f.a.get("/posts/personalized/".concat(t)).then(function(t){e.setState({personalized:t.data},function(){var a=JSON.stringify(e.state.following);f.a.get("/posts/following/".concat(a)).then(e.setState({following:t.data,loading:!1}))})})})}),f.a.get("/posts/popular/").then(function(t){e.setState({popular:t.data})})}},{key:"render",value:function(){var e,t=this;return e=null!==this.props.isAuth&&0!==this.state.personalized.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,{style:{color:"#000"},to:"/personalized"},l.a.createElement("span",null,"Personalized for you >"),l.a.createElement("hr",null)),this.state.personalized.map(function(e){return l.a.createElement(V,{post:e,savedArticles:t.state.savedArticles,toggleSaveHandler:t.toggleSaveHandler})})):l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{fontSize:"0.9em",color:"#5c5c5c"}},"Sign up to get personalized recommendations "),l.a.createElement("hr",null),this.state.posts.map(function(e){return l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(V,{post:e})))})),l.a.createElement(S.a,null,l.a.createElement(k.a,null,l.a.createElement(N.a,{lg:4,md:5,sm:12,xs:12},this.state.posts.length>0&&l.a.createElement($,{post:this.state.posts[0],savedArticles:this.state.savedArticles,toggleSaveHandler:this.toggleSaveHandler})),l.a.createElement(N.a,{lg:4,md:7,sm:12,xs:12},this.state.posts.slice(2,5).map(function(e){return l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(q,{post:e,savedArticles:t.state.savedArticles,toggleSaveHandler:t.toggleSaveHandler})))})),l.a.createElement(N.a,{lg:4,md:0,sm:12,xs:12},this.state.posts.length>4&&l.a.createElement(Q,{post:this.state.posts[1],savedArticles:this.state.savedArticles,toggleSaveHandler:this.toggleSaveHandler}))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(K,null))),l.a.createElement(k.a,null,l.a.createElement(N.a,{lg:7,md:12,sm:12,xs:12},e),l.a.createElement(N.a,{lg:5,md:12,sm:12,xs:12},this.props.isAuth&&this.state.following.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:"followingThumbnail-header"},l.a.createElement(N.a,{lg:8,md:8,sm:8,xs:8},l.a.createElement("h4",{class:"followingThumbnail-header-title"},"People who you're following")),l.a.createElement(N.a,{lg:4,md:3,sm:3,xs:3},l.a.createElement(x.a,{src:"assets/binoculars.jpeg",className:"followingThumbnail-header-image"}))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,this.state.loading?"loading":this.state.following.slice(0,4).map(function(e){return l.a.createElement(J,{post:e})})))),this.state.popular.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"popular-header"},l.a.createElement(T.a,{to:"/popular"},l.a.createElement("h2",null,"popular"))),this.state.popular.slice(0,4).map(function(e,a){return l.a.createElement(Y,{index:a,post:e,savedArticles:t.state.savedArticles,toggleSaveHandler:t.toggleSaveHandler})})))))}}]),t}(n.Component)),Z=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{style:{margin:"3.5em 0",textAlign:"center"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,null,l.a.createElement("h1",null,"This is the about page")),l.a.createElement(N.a,{md:2})),l.a.createElement(k.a,{style:{margin:"2em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,null,l.a.createElement("h3",null,"What is Lorem Ipsum?"),l.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.")),l.a.createElement(N.a,{md:2})),l.a.createElement(k.a,{style:{margin:"2em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,null,l.a.createElement("h3",null,"Why do we use it?"),l.a.createElement("p",null,"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).")),l.a.createElement(N.a,{md:2})),l.a.createElement(k.a,{style:{margin:"2em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,null,l.a.createElement("h3",null,"Where does it come from?"),l.a.createElement("p",null,'Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.'),l.a.createElement("p",null,'The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham.')),l.a.createElement(N.a,{md:2})),l.a.createElement(k.a,{style:{margin:"2em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,null,l.a.createElement("h3",null,"Where can I get some?"),l.a.createElement("p",null,"There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc.")),l.a.createElement(N.a,{md:2})))},ee=a(24),te=a(29),ae=w(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.props.replyChangeHandler(e.target.value)},a.state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,this.props.showReply&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"comment-avatar-container"},this.props.avatarImage?l.a.createElement(x.a,{src:"/".concat(this.props.avatarImage),width:"80px"}):l.a.createElement("i",{class:"fa fa-user fa-2x"})))),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:1,md:1}),l.a.createElement(N.a,{sm:10,md:10},l.a.createElement(F.a,null,l.a.createElement(F.a.Group,{controlId:"exampleForm.ControlTextarea1"},l.a.createElement(F.a.Control,{as:"textarea",style:{width:"400px"},name:"comment",value:this.props.replyValue,onChange:this.changeHandler,className:"comment-area",rows:"3",placeholder:this.props.onFocus?"Write a comment":"Posting as ".concat(this.props.username)})))),l.a.createElement(N.a,{sm:1,md:1})),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:1,md:1},l.a.createElement(j.a,{variant:"outline-info",onClick:function(t){e.props.handleSubmitReply(e.props.comment),e.props.closeReplyInput()}},"Post")),l.a.createElement(N.a,{sm:1,md:1},this.props.showReply&&l.a.createElement(j.a,{variant:"outline-secondary",onClick:this.props.closeReplyInput},"Cancel"))))))}}]),t}(n.Component)),ne=w(function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),r=a[0],s=a[1],c=function(){return s(!0)},o=Object(n.useState)(!1),i=Object(C.a)(o,2),m=i[0],u=i[1],d=(Date.now()-e.reply.date)/1e3<=20?"now":(Date.now()-e.reply.date)/1e3<60?"".concat(Math.round((Date.now()-e.reply.date)/1e3)," seconds ago"):(Date.now()-e.reply.date)/1e3/60===1?"".concat(Math.round((Date.now()-e.reply.date)/1e3/60)," minute ago"):(Date.now()-e.reply.date)/1e3/60<60?"".concat(Math.round((Date.now()-e.reply.date)/1e3/60)," minutes ago"):(Date.now()-e.reply.date)/1e3/60/60===1?"".concat(Math.round((Date.now()-e.reply.date)/1e3/60)," hour ago"):"".concat(Math.round((Date.now()-e.reply.date)/1e3/60/60)," hours ago");return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{style:{marginTop:"0.5em",borderTop:"1px solid black",padding:"1em 0 0 2em"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:1,md:1},l.a.createElement("div",{className:"comment-avatar-container"},l.a.createElement("a",{href:"/profile/".concat(e.userId)},e.reply.avatarImage?l.a.createElement(x.a,{src:"/".concat(e.reply.avatarImage),width:"80px"}):l.a.createElement("i",{class:"fa fa-user fa-2x"})))),l.a.createElement(N.a,{sm:10,md:10},l.a.createElement(k.a,null,l.a.createElement("span",{className:"replier-comment"},l.a.createElement("a",{href:e.userId!==e.reply.userId?"/profile/".concat(e.userId):"#"},e.reply.username)),l.a.createElement("i",{class:"fa fa-angle-double-right reply-arrow"}),l.a.createElement("span",{className:"replied-comment"},l.a.createElement("a",{href:e.userId!==e.reply.userId?"/profile/".concat(e.userId):"#"},e.reply.replyTo))),l.a.createElement(k.a,null,l.a.createElement("span",{className:"comment-date"},d))),l.a.createElement(N.a,{sm:1,md:1},l.a.createElement("span",{className:m?"like-mousedown comment-likes":"like-mouseup comment-likes",onClick:function(){return e.handleReplyLike(e.commentId,e.reply.replyId,e.userId)},onMouseDown:function(){return u(!0)},onMouseUp:function(){return u(!1)}},l.a.createElement("span",{className:e.reply.commentLikes.includes(e.userId)?"comment-liked":"comment-not-liked"},e.reply.commentLikes.length,l.a.createElement("i",{class:"fa fa-arrow-up"}))))),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:12,md:12},l.a.createElement("p",{className:"reply-item"},e.reply.reply))),!r&&e.isAuth&&l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:1,md:1},l.a.createElement(j.a,{variant:"outline-success",onClick:c},"Reply")),l.a.createElement(N.a,{sm:10,md:10},l.a.createElement(j.a,{variant:"outline-danger",onClick:function(){return e.handleReplyDelete(e.reply)}},"Delete"))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{user:e.reply.user,commentId:e.commentId,comment:e.reply,replyChangeHandler:e.handleReplyChange,handleSubmitReply:e.handleSubmitReply,handleReplyDelete:e.handleReplyDelete,replyValue:e.replyValue,showReply:r,showReplyInput:c,closeReplyInput:function(){return s(!1)}})))))}),le=w(function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),r=a[0],s=a[1],c=function(){return s(!0)},o=Object(n.useState)(!1),i=Object(C.a)(o,2),m=i[0],u=i[1],d=(Date.now()-e.comment.date)/1e3<=20?"now":(Date.now()-e.comment.date)/1e3<60?"".concat(Math.round((Date.now()-e.comment.date)/1e3)," seconds ago"):(Date.now()-e.comment.date)/1e3/60===1?"".concat(Math.round((Date.now()-e.comment.date)/1e3/60)," minute ago"):(Date.now()-e.comment.date)/1e3/60<60?"".concat(Math.round((Date.now()-e.comment.date)/1e3/60)," minutes ago"):(Date.now()-e.comment.date)/1e3/60/60===1?"".concat(Math.round((Date.now()-e.comment.date)/1e3/60)," hour ago"):"".concat(Math.round((Date.now()-e.comment.date)/1e3/60/60)," hours ago");return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{style:{borderTop:"1px solid black",margin:"1em 0 0 0",padding:"1em 0 0 0 "}},l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:1,md:1},l.a.createElement("div",{className:"comment-avatar-container"},l.a.createElement("a",{href:e.userId!==e.comment.userId?"/profile/".concat(e.userId):""},e.comment.avatarImage?l.a.createElement(x.a,{src:"/".concat(e.comment.avatarImage),width:"80px"}):l.a.createElement("i",{class:"fa fa-user fa-3x"})))),l.a.createElement(N.a,{sm:10,md:10},l.a.createElement("p",{className:"user-comment"},l.a.createElement("a",{href:e.userId!==e.comment.userId?"/profile/".concat(e.userId):"#"},e.comment.username)),l.a.createElement("p",{className:"comment-date"},d)),l.a.createElement(N.a,{sm:1,md:1},l.a.createElement("span",{className:m?"like-mousedown comment-likes":"like-mouseup comment-likes",onClick:function(){return e.handleCommentLike(e.comment,e.userId)},onMouseDown:function(){return u(!0)},onMouseUp:function(){return u(!1)}},l.a.createElement("span",{className:e.comment.commentLikes.includes(e.userId)?"comment-liked":"comment-not-liked"},e.comment.commentLikes.length,l.a.createElement("i",{class:"fa fa-arrow-up"}))))),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:12,md:12},l.a.createElement("p",{className:"comment-item"},e.comment.comment))),e.isAuth&&l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:1,md:1},!r&&l.a.createElement(j.a,{variant:"outline-success",onClick:c},"Reply")),l.a.createElement(N.a,{sm:10,md:10},l.a.createElement(j.a,{variant:"outline-danger",onClick:function(){return e.handleCommentDelete(e.comment.commentId)}},"Delete")),l.a.createElement(N.a,{sm:1,md:1})),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(ae,{comment:e.comment,showReply:r,showReplyInput:c,closeReplyInput:function(){return s(!1)},replyChangeHandler:e.handleReplyChange,handleSubmitReply:e.handleSubmitReply,handleReplyDelete:e.handleReplyDelete,replyValue:e.replyValue}),e.comment.replies.map(function(t){return l.a.createElement(ne,{reply:t,timeStamp:e.timeStamp,commentId:e.comment.commentId,handleReplyChange:e.handleReplyChange,handleReplyDelete:e.handleReplyDelete,handleReplyLike:e.handleReplyLike,handleSubmitReply:e.handleSubmitReply,replyValue:e.replyValue,handleShowReply:c,showReply:r})})))))}),re=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={},a.changeHandler=function(e){a.props.commentChangeHandler(e.target.value)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,null,l.a.createElement(b,null,function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"comment-avatar-container"},l.a.createElement(x.a,{src:"/".concat(t.avatarImage),width:"60px"})))),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:1,md:1}),l.a.createElement(N.a,{sm:10,md:10},l.a.createElement(F.a,null,l.a.createElement(F.a.Group,{controlId:"exampleForm.ControlTextarea1"},l.a.createElement(F.a.Control,{as:"textarea",style:{width:"400px"},name:"comment",onChange:e.changeHandler,value:e.props.comment,className:"comment-area",rows:"3",placeholder:e.onFocus?"Write a comment":"Posting as ".concat(t.username)})),l.a.createElement(j.a,{variant:"outline-primary",onClick:function(){return e.props.handleSubmitComment(e.props.comment)}},"Publish"))),l.a.createElement(N.a,{sm:1,md:1})))})))}}]),t}(n.Component)),se=a(49),ce=a.n(se),oe=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={img:"img",comment:"",reply:"",savedComments:[],commentsObject:{comments:[]},comments:[]},a.handleCommentChange=function(e){a.setState({comment:e})},a.handleSubmitComment=function(){var e={commentId:ce.a.v4(),userId:a.props.userId,avatarImage:a.props.avatarImage,commentLikes:[],username:a.props.username,comment:a.state.comment,date:Date.now(),replies:[]},t={articleId:a.props.articleId,comments:[].concat(Object(te.a)(a.state.commentsObject.comments),[e]),closed:!1};f.a.put("/comments/update/".concat(a.props.articleId),t).then(function(e){a.setState({commentsObject:e.data,comment:""})})},a.handleCommentDelete=function(e){a.setState({comments:a.state.commentsObject.comments.filter(function(t){return t.commentId!==e})},function(){var e={articleId:a.state.articleId,comments:a.state.comments,closed:!1};f.a.put("/comments/update/".concat(a.props.articleId),e).then(function(e){a.setState({resData:e.data},function(){f.a.get("/comments/".concat(a.props.articleId)).then(function(e){e.data&&a.setState({commentsObject:e.data,comment:""})})})})})},a.handleReplyChange=function(e){a.setState({reply:e})},a.handleSubmitReply=function(e){var t={username:a.props.username,avatarImage:a.props.avatarImage,userId:a.props.userId,commentLikes:[],commentId:e.commentId,replyId:ce.a.v4(),replyTo:e.username,reply:a.state.reply,date:Date.now()};a.setState({comments:a.state.commentsObject.comments.map(function(a){return a.commentId===e.commentId?Object(ee.a)({},a,{replies:[].concat(Object(te.a)(a.replies),[t])}):a})},function(){a.setState(function(e){var t=Object.assign({},e.commentsObject);return t.comments=a.state.comments,{commentsObject:t}},function(){f.a.put("/comments/update/".concat(a.props.articleId),a.state.commentsObject).then(function(e){f.a.get("/comments/".concat(a.props.articleId)).then(function(e){e.data&&a.setState({commentsObject:e.data,reply:""})})})})})},a.handleCommentLike=function(e,t){a.setState({comments:a.state.commentsObject.comments.map(function(a){return a.commentId===e.commentId?a.commentLikes.includes(t)?Object(ee.a)({},a,{commentLikes:a.commentLikes.filter(function(e){return e!=t})}):Object(ee.a)({},a,{commentLikes:[].concat(Object(te.a)(a.commentLikes),[t])}):a})},function(){a.setState(function(e){var t=Object.assign({},e.commentsObject);return t.comments=a.state.comments,{commentsObject:t}},function(){f.a.put("comments/update/".concat(a.props.articleId),a.state.commentsObject).then(function(e){a.setState({commentsObject:e.data})})})})},a.handleReplyLike=function(e,t,n){a.setState({comments:a.state.commentsObject.comments.map(function(a){return a.commentId===e?Object(ee.a)({},a,{replies:a.replies.map(function(e){return e.replyId===t?e.commentLikes.includes(n)?Object(ee.a)({},e,{commentLikes:e.commentLikes.filter(function(e){return e!=n})}):Object(ee.a)({},e,{commentLikes:[].concat(Object(te.a)(e.commentLikes),[n])}):e})}):a})},function(){a.setState(function(e){var t=Object.assign({},e.commentsObject);return t.comments=a.state.comments,{commentsObject:t}},function(){f.a.put("comments/update/".concat(a.props.articleId),a.state.commentsObject).then(function(e){a.setState({commentsObject:e.data})})})})},a.handleReplyDelete=function(e){a.setState({updatedReplies:a.state.commentsObject.comments.map(function(t){return Object(ee.a)({},t,{replies:t.replies.filter(function(t){return t.replyId!==e.replyId})})})},function(){var e={articleId:a.state.articleId,comments:a.state.updatedReplies,closed:!1};f.a.put("/comments/update/".concat(a.props.articleId),e).then(function(e){a.setState({commentsObject:e.data})})})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.articleId!==e.articleId&&f.a.get("/comments/".concat(this.props.articleId)).then(function(e){e.data&&t.setState({commentsObject:e.data})})}},{key:"render",value:function(){var e=this;return l.a.createElement(S.a,null,l.a.createElement(b,null,function(t){return l.a.createElement(l.a.Fragment,null,t.isAuth&&l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:2,md:2}),l.a.createElement(N.a,{sm:8,md:8},l.a.createElement(re,{comment:e.state.comment,handleSubmitComment:e.handleSubmitComment,commentChangeHandler:e.handleCommentChange})),l.a.createElement(N.a,{sm:2,md:2})))}),l.a.createElement(k.a,null,l.a.createElement(N.a,null,this.state.commentsObject.comments.map(function(t){return l.a.createElement(le,{getTimeStamp:e.getTimeStamp,comment:t,handleCommentDelete:e.handleCommentDelete,handleCommentLike:e.handleCommentLike,handleReplyLike:e.handleReplyLike,handleReplyChange:e.handleReplyChange,handleSubmitReply:e.handleSubmitReply,handleReplyDelete:e.handleReplyDelete,replyValue:e.state.reply})}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.userId!==t.userId)return{userId:e.userId}}}]),t}(n.Component));function ie(e){return l.a.createElement(j.a,{style:{margin:"0.7em 0 0 0"},onClick:e.handleFollow,variant:e.following&&e.following.includes(e.authorId)?"success":"secondary"},e.following&&e.following.includes(e.authorId)?"Following":"Not following")}function me(e){return l.a.createElement(S.a,{style:{margin:"0.5em 0 0 0"}},l.a.createElement(b,null,function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"postStats-top"},t.isAuth?l.a.createElement("div",{onClick:e.handleLike,className:e.userLikes.includes(e.articleId)?"postStats-liked":"postStats-unliked"},l.a.createElement("span",null,e.postLikes.length),l.a.createElement("i",{class:"fa fa-thumbs-o-up",style:{marginLeft:"10px"}})):l.a.createElement("div",{onClick:function(){return e.warnLogin()},className:"postStats-unliked"},l.a.createElement("span",null,e.postLikes.length),l.a.createElement("i",{class:"fa fa-thumbs-o-up",style:{marginLeft:"10px"}})),l.a.createElement("div",{className:"postStats-length"},"".concat(e.readLength," minute read")),l.a.createElement("div",{className:"postStats-views"},"Views: ",e.views?e.views:0)),l.a.createElement("div",{className:"postStats-bottom"},t.isAuth?l.a.createElement("div",{className:e.readingHistory.includes(e.articleId)?"postStats-read":"postStats-unread"},e.readingHistory.includes(e.articleId)?l.a.createElement("i",null,"Read"):"Unread"):""))}))}function ue(e){return l.a.createElement(S.a,{className:"post-header-container"},l.a.createElement(b,null,function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{style:{margin:"0 0 1.5em 0"}},l.a.createElement(N.a,{md:1}),l.a.createElement(N.a,{md:10,className:"center"},l.a.createElement("h1",{className:"postHeader-title"},e.post.title)),l.a.createElement(N.a,{md:1})),l.a.createElement(k.a,{className:"",style:{margin:"2em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,{md:2}," ",l.a.createElement("p",{className:"postHeader-topic"},"In ".concat(e.post.topic))," "),l.a.createElement(N.a,{md:4,className:"postHeader-tagline center"},e.post.tagline),l.a.createElement(N.a,{md:4})),l.a.createElement(k.a,{md:1,style:{marginBottom:"2em"}},l.a.createElement(N.a,{md:1}),l.a.createElement(N.a,{md:10},l.a.createElement("div",{className:"postHeader-image-container"},l.a.createElement(x.a,{src:"/".concat(e.post.image),width:"100%"})))),l.a.createElement(k.a,{className:"postHeader-details",style:{margin:"1em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,{md:4},l.a.createElement(G,{post:e.post})),l.a.createElement(N.a,{md:3},l.a.createElement(me,e)),l.a.createElement(N.a,{md:3},t.isAuth&&t.userId!==e.post.authorId&&l.a.createElement(ie,{authorId:e.post.authorId,handleFollow:e.post.handleFollow,following:e.post.following}),t.isAuth&&t.userId===e.post.authorId&&l.a.createElement(j.a,{variant:"secondary",onClick:function(){return e.editUserArticle(e.articleId)}},"Edit post"))))}))}var de=a(41),pe=w(function(e){var t=l.a.createRef();return l.a.createElement(P.a,Object.assign({},e,{dialogClassName:"modal-90w"}),l.a.createElement(P.a.Header,{className:"edit-modal-title-container"},l.a.createElement(k.a,{style:{marginTop:"1em"}},l.a.createElement(N.a,null,l.a.createElement("h1",{className:"edit-modal-title"},"Edit Article")))),l.a.createElement(P.a.Body,null,l.a.createElement(k.a,null,l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,{md:8,style:{textAlign:"center"}},l.a.createElement("div",{className:"edit-post-image"},l.a.createElement(x.a,{src:"/".concat(e.image),width:"100%"}))),l.a.createElement(N.a,{md:2})),l.a.createElement(k.a,{className:"center",style:{margin:"1em 0"}},l.a.createElement(N.a,null,l.a.createElement("input",{style:{display:"none"},type:"file",onChange:e.fileChangeHandler,ref:t}),l.a.createElement(j.a,{onClick:function(){t.current.click()}},"Update image"))),l.a.createElement(k.a,null,l.a.createElement(N.a,{lg:2,md:1}),l.a.createElement(N.a,{lg:8,md:10},l.a.createElement(N.a,null,l.a.createElement(F.a,{onSubmit:e.handleSubmit},l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Title")," ",l.a.createElement("span",{className:"input-chars-remaining"},"characters remaining: ",e.titleLen),l.a.createElement(F.a.Control,{className:"text-muted",type:"text",id:"title",name:"title",onChange:e.changeHandler,value:e.title,placeholder:"Enter a title"})),l.a.createElement(b,null,function(e){return l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Author"),l.a.createElement(F.a.Control,{className:"text-muted",type:"text",id:"author",name:"author",value:e.username}))}),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Tagline"),"    ",l.a.createElement("span",{className:"input-chars-remaining"},"characters remaining: ",e.taglineLen),l.a.createElement(F.a.Control,{className:"text-muted",type:"text",id:"tagline",name:"tagline",onChange:e.changeHandler,value:e.tagline,placeholder:"Enter a description ( props will appear in the thumbnail)"})),l.a.createElement(F.a.Group,{controlId:"formGridState"},l.a.createElement(F.a.Label,null,"Topic"),l.a.createElement(F.a.Control,{as:"select",name:"topic",onChange:e.changeHandler,value:e.topic},l.a.createElement("option",{value:""},"Choose..."),l.a.createElement("option",{value:"tech"},"Tech"),l.a.createElement("option",{value:"language"},"Language"),l.a.createElement("option",{value:"science"},"Science"),l.a.createElement("option",{value:"self"},"Self"),l.a.createElement("option",{value:"society"},"Society"),l.a.createElement("option",{value:"music"},"Music"),l.a.createElement("option",{value:"geography"},"Geography"),l.a.createElement("option",{value:"code"},"Code"),l.a.createElement("option",{value:"nature"},"Nature"),l.a.createElement("option",{value:"health"},"Health"),l.a.createElement("option",{value:"psych"},"Psych"),l.a.createElement("option",{value:"food"},"food"),l.a.createElement("option",{value:"relationships"},"relationships"))),l.a.createElement(F.a.Group,{controlId:"post_content"},l.a.createElement(F.a.Label,null,"Post"),l.a.createElement(de.a,{init:{plugins:"link image code",toolbar:"undo redo | bold italic | alignleft aligncenter alignright | code",height:400},id:"content",onChange:e.handleEditorChange,name:"content",value:e.content,placeholder:"Write your post"})),l.a.createElement(k.a,null,l.a.createElement(N.a,{lg:2,md:2,sm:3,xs:2},l.a.createElement(j.a,{variant:"secondary",onClick:function(){return e.cancelPostEdit()}},"Cancel")),l.a.createElement(N.a,{lg:2,md:2,sm:3,xs:1},l.a.createElement(j.a,{variant:"primary",onClick:function(){return e.submitUpdatedArticle()}},"Save")),l.a.createElement(N.a,{lg:6,md:5,sm:1,xs:1}),l.a.createElement(N.a,{lg:2,md:3,sm:1,xs:1},l.a.createElement(j.a,{size:"s",variant:"danger",onClick:function(){return e.deleteUserWarning()}},"Delete"))))),l.a.createElement(N.a,{lg:2,md:1}))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("span",{className:"center create-post-error"},e.error)))),l.a.createElement(P.a.Footer,null))});function he(e){return l.a.createElement(P.a,e,l.a.createElement(P.a.Header,null,l.a.createElement(P.a.Title,null,"Delete")),l.a.createElement(P.a.Body,null,l.a.createElement("p",null,"Are you sure you want to permanently delete this post?")),l.a.createElement(P.a.Footer,null,l.a.createElement(j.a,{variant:"secondary",onClick:function(){return e.closeWarningModal()}},"Cancel"),l.a.createElement(j.a,{variant:"danger",onClick:function(){return e.deleteUserPost(e.editedPostId)}},"Delete")))}var ge=w(function(e){function t(){var e,a,n;Object(o.a)(this,t);for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=(a={post:"",topic:"",authorId:"",author:""},Object(c.a)(a,"post",""),Object(c.a)(a,"images",[]),Object(c.a)(a,"tags",[]),Object(c.a)(a,"edit_log",[]),Object(c.a)(a,"following",[]),Object(c.a)(a,"views",null),Object(c.a)(a,"editing",!1),Object(c.a)(a,"deleting",!1),Object(c.a)(a,"deleted",!1),Object(c.a)(a,"postLikes",[]),Object(c.a)(a,"readingHistory",[]),Object(c.a)(a,"readLength",null),Object(c.a)(a,"userLikes",[]),Object(c.a)(a,"comments",[]),Object(c.a)(a,"views",""),a),n.getReadLength=function(){var e=n.state.post.content.split(" ").length,t=Math.round(e/225);0===t&&(t=1),n.setState({readLength:t})},n.handleLike=function(){var e={toToggle:n.state.articleId,name:"likes"};f.a.put("users/update/likes/".concat(n.props.userId),e).then(function(e){n.setState({userLikes:e.data.likes})});var t={userId:n.props.userId};f.a.put("/posts/update/likes/".concat(n.state.articleId),t).then(function(e){n.setState({res:e.data,postLikes:e.data.postLikes})})},n.handleFollow=function(){if(n.state.authorId!==n.props.userId){var e={toToggle:n.state.authorId,name:"following"};f.a.put("/users/update/following/".concat(n.props.userId),e).then(function(e){n.setState({following:e.data.following})})}},n.changeHandler=function(e){var t;n.setState((t={},Object(c.a)(t,e.target.name,e.target.value),Object(c.a)(t,"titleLen",60-n.state.title.length),Object(c.a)(t,"taglineLen",60-n.state.tagline.length),Object(c.a)(t,"error",""),t))},n.handleEditorChange=function(e){n.setState({content:e.target.getContent()})},n.editUserArticle=function(){f.a.get("/posts/user/post/".concat(n.state.articleId)).then(function(e){n.setState({post:e.data,editedPostId:e.data._id,image:e.data.image,title:e.data.title,tagline:e.data.tagline,topic:e.data.topic,content:e.data.content,editing:!0})})},n.fileChangeHandler=function(e){n.setState({img:e.target.files[0]});var t=new FormData;t.append("image",e.target.files[0]);f.a.put("/posts/user/update/post/image/".concat(n.state.editedPostId),t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){n.setState({image:e.data.image})})},n.submitUpdatedArticle=function(){if(n.state.title.length<5||n.state.title.length>60||n.state.tagline.length<5||n.state.tagline.length>60)n.setState({error:"The title and tagline should be between 5 and 40 characters long"});else{var e={articleId:n.state.editedPostId,title:n.state.title,tagline:n.state.tagline,topic:n.state.topic,content:n.state.content};f.a.put("/posts/user/update/post/getone",e).then(function(e){n.setState({post:e.data,author:e.data.author,authorId:e.data.authorId,postLikes:e.data.postLikes,views:e.data.views.length,editing:!1},function(){return n.getReadLength()})})}},n.cancelPostEdit=function(){n.setState({editing:!1,editedPostId:null,title:null,tagline:null,topic:null,content:null})},n.deleteUserWarning=function(){n.setState({deleting:!0})},n.closeWarningModal=function(){n.setState({deleting:!1})},n.deleteUserPost=function(e){f.a.delete("/posts/user/delete/post/".concat(n.props.userId),{data:{articleId:e}}).then(function(e){n.setState({editing:!1,deleting:!1,deleted:!0})})},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({articleId:t}),f.a.get("/posts/singlepost/".concat(t)).then(function(t){e.setState({post:t.data,author:t.data.author,authorId:t.data.authorId,postLikes:t.data.postLikes,views:t.data.views.length},function(){return e.getReadLength()})}),f.a.get("/users/").then(function(t){e.setState({following:t.data.user.following,userLikes:t.data.user.likes})}).catch(function(t){e.setState({following:null,userLikes:null})})}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.userId!==e.userId){var a={userId:this.props.userId};f.a.put("/posts/update/views/".concat(this.state.articleId),a).then(function(e){t.setState({views:e.data.views.length})});var n={articleId:this.state.articleId};f.a.put("/users/update/readinghistory/".concat(this.props.userId),n).then(function(e){t.setState({readingHistory:e.data.reading_history})})}}},{key:"render",value:function(){var e=this;return this.state.deleted?l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,null,l.a.createElement("h1",null,"Post deleted"))),l.a.createElement(k.a,{className:"center",style:{margin:"3em 0"}},l.a.createElement(N.a,null,l.a.createElement(j.a,{href:"/home"},"Ok")))):l.a.createElement(S.a,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(ue,Object.assign({},this.state,{handleLike:function(){return e.handleLike()},handleFollow:function(){return e.handleFollow(e.state.authorId)},editUserArticle:this.editUserArticle,warnLogin:this.props.warnLogin})))),l.a.createElement(k.a,{style:{margin:"2em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,{md:8},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.post.content}})),l.a.createElement(N.a,{md:2})),l.a.createElement("hr",null),l.a.createElement(k.a,{style:{margin:"2em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,{md:8},l.a.createElement("h4",null,"".concat(this.state.post.comments," Comments"))),l.a.createElement(N.a,{md:2})),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(oe,{handleLike:this.handleLike,post:this.state.post,articleId:this.state.articleId}))),l.a.createElement(pe,{show:this.state.editing,title:this.state.title,image:this.state.image,tagline:this.state.tagline,topic:this.state.topic,content:this.state.content,editedPostId:this.state.editedPostId,error:this.state.error,img:this.state.img,titleLen:this.state.titleLen,taglineLen:this.state.taglineLen,changeHandler:this.changeHandler,handleEditorChange:this.handleEditorChange,fileChangeHandler:this.fileChangeHandler,submitUpdatedArticle:this.submitUpdatedArticle,cancelPostEdit:this.cancelPostEdit,deleteUserWarning:this.deleteUserWarning}),l.a.createElement(he,{editedPostId:this.state.editedPostId,show:this.state.deleting,onHide:this.state.deleting,closeWarningModal:this.closeWarningModal,deleteUserPost:this.deleteUserPost}))}}]),t}(n.Component));var Ee=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(S.a,{style:{margin:"3em 0"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:8},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"topicHeaderPost-image-container"},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement(x.a,{src:"/".concat(e.post.image),width:"100%"})))))),l.a.createElement(N.a,{md:4},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h1",{className:"topicHeaderPost-title"},e.post.title))),l.a.createElement(N.a,{md:1,style:{marginTop:"0.5em"}},t)),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"topicHeaderPost-tagline"},"".concat(e.post.tagline))))),l.a.createElement(k.a,{style:{margin:"0.6em 0"}},l.a.createElement(N.a,{style:{padding:"0"}},l.a.createElement(G,{post:e.post}))))))}),fe=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("div",{className:"topicPageItem-image-container"},l.a.createElement(x.a,{src:"/".concat(e.post.image),width:"100%"}),l.a.createElement("br",null))))),l.a.createElement(k.a,{style:{margin:"1em 0 0 0"}},l.a.createElement(N.a,{md:10,sm:10,style:{padding:"0"}},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h5",null,e.post.title))),l.a.createElement(N.a,{md:1},t)),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"topicPageItem-tagline"},e.post.tagline)))),l.a.createElement(k.a,{style:{marginTop:"0.5em"}},l.a.createElement(N.a,null,l.a.createElement(G,{post:e.post}))))}),ve=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={topicArray:[],loading:!0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.topic;this.setState({topic:t}),f.a.get("/posts/topic/".concat(t)).then(function(t){e.setState({topicArray:t.data,loading:!1})})}},{key:"render",value:function(){var e=this;return l.a.createElement(S.a,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h1",{className:"topic-page-header"},this.state.topic))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("hr",null))),this.state.loading?"":l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,this.state.topicArray.length<1?"No posts on this topic yet...":l.a.createElement(Ee,{post:this.state.topicArray[0],savedArticles:this.props.savedArticles,toggleSaveHandler:this.props.toggleSaveHandler,isAuth:this.props.isAuth}))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("hr",null))),l.a.createElement(k.a,{style:{margin:"2em 0"}},this.state.topicArray.slice(1,4).map(function(t){return l.a.createElement(N.a,{md:4},l.a.createElement(fe,{post:t,savedArticles:e.props.savedArticles,toggleSaveHandler:e.props.toggleSaveHandler,isAuth:e.props.isAuth}))})),l.a.createElement(k.a,null,l.a.createElement(N.a,null,this.state.topicArray.length<5?"":l.a.createElement(Ee,{post:this.state.topicArray[4],savedArticles:this.props.savedArticles,toggleSaveHandler:this.props.toggleSaveHandler,isAuth:this.props.isAuth}))),l.a.createElement(k.a,{style:{margin:"2em 0"}},this.state.topicArray.slice(5,8).map(function(t){return l.a.createElement(N.a,{md:4},l.a.createElement(fe,{post:t,savedArticles:e.props.savedArticles,toggleSaveHandler:e.props.toggleSaveHandler,isAuth:e.props.isAuth}))}))))}}]),t}(n.Component));function ye(){return l.a.createElement(S.a,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h1",null,"Terms and Conditions"))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h2",null,"Curabitur nec orci viverra"),l.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas at elit eu dolor fermentum lacinia nec nec mauris. Nulla facilisi. Curabitur nec aliquam sapien, in dictum orci. Sed suscipit efficitur tortor vitae porttitor. In hac habitasse platea dictumst. Nunc sed iaculis nunc. Donec vel urna rutrum, porttitor dui non, facilisis nunc. Sed posuere quis nunc eget laoreet. Fusce dapibus, tortor non mollis suscipit, elit felis finibus purus, eget malesuada sapien nunc nec tellus. Orci varius natoque penatibus et magnis dis parturient montes, nasc etur ridiculus mus.",l.a.createElement("h2",null,"Curabitur nec orci viverra"),l.a.createElement("p",null,"In eget ipsum eu arcu ullamcorper feugiat. Nulla id iaculis urna, sit am et porttitor magna. Pellentesque mauris sapien, pulvinar ac luctus finibus, cursus ac tortor. Integer tempor libero at eros elementum feugiat. Suspendisse potenti. Sed in diam eu ex pulvinar faucibus. Integer purus tortor, eleifend vulputate molestie a, rhoncus vitae diam. Suspendisse ut lobortis leo. Fusce porta risus augue, at pr etium elit eleifend eget."),l.a.createElement("h2",null,"Curabitur nec orci viverra"),l.a.createElement("p",null,"Morbi et ligula non enim sagittis sagittis volutpat ac eros. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;Mauris dolor nisi, hendrerit in viverra eu, malesuada sit am et leo. Ut nec libero massa. Morbi ac egestas nunc, vel faucibus eros. Praesent id quam gravida, tincidunt nisi vitae, mattis nisi. Phasellus at lacus aliqu et, laoreet felis vitae, consectetur turpis.  Ut ut tristique neque. Curabitur in purus ultricies, lobortis elit eu, scelerisque nisi. Nulla sit amet lorem arcu. Praesent pellentesque lectus at urna porta, scelerisque pellentesque mi efficitur. Quisque auctor arcu sit amet nunc accumsan tristique. Sed iaculis nibh eu lacus eleifend, a porta orci condimentum. Nunc suscipit dapibus dolor sit amet iaculis. Nunc non efficitur turpis, at tristique arcu. Nulla facilisi."),l.a.createElement("h2",null,"Curabitur nec orci viverra"),"Proin interdum vel felis sit amet consequat. Curabitur nec orci viverra, faucibus dolor vel, fermentum quam. Ut eget semper mauris. Integer ac metus maximus, vestibulum tellus sit amet, porta diam. Nunc lectus justo, iaculis id porttitor a, sollicitudin a nisi. Duis sed ullamcorper velit. Nulla molestie risus ligula, egestas imperdiet arcu convallis non.  Maecenas interdum, nulla in auctor feugiat, tortor enim faucibus est, ut congue mi magna in orci. Nullam sed ullamcorper arcu. Sed vehicula sem quis lacus scelerisque, at vulputate quam viverra. Pellentesque luctus commodo est, ut ultrices velit consectetur vel. Integer euismod posuere commodo. Ut dapibus arcu vel aliquet interdum."))))}function be(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{style:{margin:"2em 0",padding:"2.5em 0",borderTop:"1px dotted #c6c6c6"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,{md:5},l.a.createElement("div",{className:"authorLatestPostItem-image-container"},l.a.createElement(x.a,{src:"/".concat(e.post.image),width:"200px"}))),l.a.createElement(N.a,null,l.a.createElement("h4",{className:"authorLatestPostItem-title"},e.post.title),l.a.createElement("p",{className:"authorLatestPostItem-tagline"},"".concat(e.post.tagline.substring(0,100),"...")),l.a.createElement(G,{post:e.post}))))}var we=w(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).get_user=function(){f.a.get("/users/").then(function(e){a.setState({following:e.data.user.following,FollowingOrError:!1})})},a.handleFollow=function(e){var t={toToggle:e,name:"following"};e!==a.props.userId&&f.a.put("/users/update/following/".concat(a.props.userId),t).then(function(e){a.setState({following:e.data.following})})},a.state={following:[],posts:[],user:"",id:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({id:t,loading:!0}),f.a.get("/users/profile/".concat(t)).then(function(t){e.setState({user:t.data,id:t.data._id,image:t.data.image,username:t.data.username,joined:t.data.joined,loading:!1})}).catch(function(t){e.setState({err:t})}),f.a.get("/posts/user/posts/".concat(t)).then(function(t){e.setState({posts:t.data})})}},{key:"componentDidUpdate",value:function(e,t){!0===this.state.FollowingOrError&&this.get_user()}},{key:"render",value:function(){var e=this;return null!==this.state.id&&this.state.id===this.props.userId?l.a.createElement(H.a,{to:"/editProfile"}):this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,null)):l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"center",style:{margin:"3em 0"}},l.a.createElement(N.a,null,l.a.createElement("div",{className:"profile-page-avatar-container"},l.a.createElement(x.a,{src:"/".concat(this.state.image),width:"200px"})))),l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,null,l.a.createElement("h1",null,this.state.username))),l.a.createElement(k.a,{className:"center",style:{margin:"3em 0"}},l.a.createElement(N.a,null,this.props.userId?l.a.createElement(ie,{authorId:this.state.id,following:this.state.following,handleFollow:function(){return e.handleFollow(e.state.id)}}):l.a.createElement(j.a,{variant:"secondary",disabled:!0},"Log in to follow"))),l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,null,l.a.createElement("p",{style:{color:"#a1a1a1"}},"Member since:  ",l.a.createElement("i",null,this.state.joined)))),l.a.createElement(k.a,{className:"center",style:{margin:"2em 0"}},l.a.createElement(N.a,null,l.a.createElement("h2",null,"Latest Articles"))),l.a.createElement(k.a,{style:{margin:"2em 0"}},this.state.posts.length<1?l.a.createElement(N.a,{style:{color:"#a1a1a1",fontSize:"0.9em"}},"They appear not to have written anything yet..."):l.a.createElement(N.a,null,this.state.posts.map(function(e){return l.a.createElement(be,{post:e})}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.userId!==t.prevUserId?{prevUserId:e.userId,FollowingOrError:!0}:null}}]),t}(n.Component)),Se=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!1,submitted:!1},a.changeHandler=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){var t={email:a.state.email};a.setState({loading:!0}),f.a.post("/users/sendemail",t).then(function(e){a.setState({submitted:!0,msg:e.data.msg,sendingEmail:!1,loading:!1})}).catch(function(e){return console.log(e)})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):this.state.submitted?l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement("h1",null,this.state.msg.title))),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement("h5",null,this.state.msg.body))),this.state.msg.showRedirect&&l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement(T.a,{className:"link-as-button",to:{pathname:this.state.msg.to,state:{id:this.state.id,email:this.state.email,set:!0}}},this.state.msg.btnTxt)))):l.a.createElement(S.a,null,this.state.email,l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,{sm:2}),l.a.createElement(N.a,null,l.a.createElement("h1",null,"Oops! You need to confirm your email first"),l.a.createElement("h6",null,"Enter your email to see if you're in our system")),l.a.createElement(N.a,{sm:2})),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{sm:6,md:6},l.a.createElement(F.a,null,l.a.createElement(F.a.Group,{controlId:"formBasicEmail"},l.a.createElement(F.a.Control,{onChange:this.changeHandler,name:"email",type:"email",value:this.state.email,placeholder:"Enter email"}),l.a.createElement(F.a.Text,{className:"text-muted center"},"We'll never share your email with anyone else."))),l.a.createElement("p",{style:{color:"red"}},this.state.error))),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,{sm:3}),l.a.createElement(N.a,null,l.a.createElement(j.a,{onClick:this.handleSubmit},"Check email")),l.a.createElement(N.a,{sm:3})))}}]),t}(n.Component),ke=w(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.props.changeHandler(e)},a.state={redirectTo:null},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.spinner?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):this.state.redirectTo?l.a.createElement(H.a,{to:this.state.redirectTo}):l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"show-grid"},l.a.createElement(N.a,{sm:2,md:2}),l.a.createElement(N.a,{className:"center",sm:8,md:8},l.a.createElement("p",{style:{fontSize:"0.9em",color:"#656565",marginBottom:"5%"}},"Stay up to date with all our articles and get our personalized recommendations about all the things that are important to you.")),l.a.createElement(N.a,{sm:2,md:2})),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{sm:6,md:6},l.a.createElement(F.a,{onSubmit:this.props.handleUserLogin},l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Email"),l.a.createElement(F.a.Control,{className:"text-muted",type:"email",id:"email",name:"email",onChange:this.changeHandler,value:this.state.email})),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Password"),l.a.createElement(F.a.Control,{className:"text-muted",type:"password",id:"password",name:"password",onChange:this.changeHandler,value:this.state.password})),l.a.createElement(k.a,{style:{margin:"2% 0"}},l.a.createElement(N.a,{className:"center"},l.a.createElement(j.a,{type:"submit"},"Login"))))),l.a.createElement(N.a,{sm:3,md:3})),l.a.createElement(k.a,{className:"center",style:{color:"red"}},l.a.createElement(N.a,null,l.a.createElement("p",null,this.state.error))),l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,{style:{fontSize:"0.8em"}},l.a.createElement(T.a,{to:"/forgotpassword",style:{color:"#2c4a93"}},"Forgot password?"))),l.a.createElement(k.a,{style:{margin:"2% 0"}},l.a.createElement(N.a,{className:"center"},l.a.createElement("p",null,"Now account? ",l.a.createElement("span",{onClick:function(t){e.props.hideLogin(),e.props.showSignup()},style:{marginLeft:"1%",color:"#0069d9",cursor:"pointer"}},"Create one")))),l.a.createElement(k.a,{style:{margin:" 5% 0 2% 0",color:"#656565",fontSize:"0.9em"}},l.a.createElement(N.a,{sm:1,md:1}),l.a.createElement(N.a,{sm:10,md:10,className:"center"},"We log user data and share it with service providers to keep our site running. Click \u201cSign in\u201d above to accept  ourTerms of Service and Privacy Policy."),l.a.createElement(N.a,{sm:1,md:1})))}}]),t}(n.Component)),Ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={submitted:!1,spinner:!1},a.changeHandler=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={email:a.state.email};a.setState({spinner:!0}),f.a.post("/users/recoverpassword",t).then(function(e){a.setState({submitted:!0,msg:e.data.msg,spinner:!1})}).catch(function(e){a.setState({submitted:!1,error:"That email appears not to be in our system",spinner:!1})})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.submitted?l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement("h1",null,this.state.msg.title))),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement("h5",null,this.state.msg.body))),this.state.id,this.state.msg.showRedirect&&l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement(T.a,{className:"link-as-button",to:{pathname:this.state.msg.to,state:{id:this.state.id,email:this.state.email,set:!0}}},this.state.msg.btnTxt)))):l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"user-message",style:{margin:"2em 0"}},l.a.createElement(N.a,{sm:2}),l.a.createElement(N.a,null,l.a.createElement("h1",null,"Login Recovery")),l.a.createElement(N.a,{sm:2})),l.a.createElement(k.a,{className:"center",style:{margin:"2em 0"}},l.a.createElement(N.a,null,l.a.createElement("h6",null,"Enter your email and we'll send you a link to reset your password"))),l.a.createElement(k.a,{style:{margin:"2em 0"}},l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{sm:6,md:6},l.a.createElement(F.a,null,l.a.createElement(F.a.Group,{controlId:"formBasicEmail"},l.a.createElement(F.a.Control,{onChange:this.changeHandler,name:"email",type:"email",value:this.state.email,placeholder:"Enter email"}))),l.a.createElement("p",{style:{color:"red"}},this.state.error))),l.a.createElement(k.a,null,l.a.createElement(N.a,{className:"center",style:{marginBottom:"3%"}},l.a.createElement(j.a,{variant:"dark",onClick:this.handleSubmit}," ",this.state.spinner?l.a.createElement("span",null,l.a.createElement(I,{spinning:"spinning",size:"1x"})):"Send"))))}}]),t}(n.Component),Ie=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!1,passwordUpdated:!1,type:"password",password:"",password2:"",match:"none",noMatch:"none"},a.changeHandler=function(e){a.setState(Object(c.a)({error:""},e.target.name,e.target.value),function(){a.state.password===a.state.password2?a.setState({match:"inline",noMatch:"none"}):a.setState({match:"none",noMatch:"inline"})})},a.toggleViewPassword=function(){"password"===a.state.type?a.setState({type:"text"}):a.setState({type:"password"})},a.handleSubmit=function(e){if(e.preventDefault(),""!=a.state.password&&""!=a.state.password2)if(a.state.password===a.state.password2){a.setState({loading:!0});var t={password:a.state.password};f.a.post("/users/setnewpassword/".concat(a.state.token),t).then(function(e){a.setState({msg:e.data.msg,loading:!1,passwordUpdated:!0})}).catch(function(e){a.setState({error:"There was a problem resetting your password",loading:!1})})}else a.setState({error:"Make sure both passwords match"});else a.setState({error:"Please fill both fields"})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.token;this.setState({token:t,loading:!0}),f.a.post("/users/confirmpasswordrecover/".concat(t)).then(function(t){200===t.status&&e.setState({redirectTo:null,loading:!1})}).catch(function(t){e.setState({redirectTo:"/login",loading:!1})})}},{key:"render",value:function(){var e,t;return this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):this.state.redirectTo?l.a.createElement(H.a,{to:this.state.redirectTo}):this.state.passwordUpdated?l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement("h1",null,this.state.msg.title))),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement("h5",null,this.state.msg.body))),this.state.id,this.state.msg.showRedirect&&l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement(T.a,{className:"link-as-button",to:{pathname:this.state.msg.to,state:{id:this.state.id,email:this.state.email,set:!0}}},this.state.msg.btnTxt)))):l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"show-grid"},l.a.createElement(N.a,{sm:2,md:2}),l.a.createElement(N.a,{className:"center",sm:8,md:8},l.a.createElement("p",{style:{fontSize:"0.9em",color:"#656565",marginBottom:"5%"}},"Choose a new password")),l.a.createElement(N.a,{sm:2,md:2})),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{sm:6,md:6},l.a.createElement(F.a,null,l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"New password")," ",this.state.password&&l.a.createElement("span",{style:{marginLeft:"2em",color:"8e8e8e",fontSize:"0.8em",textDecoration:"underline",cursor:"pointer"},onClick:this.toggleViewPassword},"view"),l.a.createElement(F.a.Control,(e={className:"text-muted",onChange:this.changeHandler,type:this.state.type,name:"password"},Object(c.a)(e,"onChange",this.changeHandler),Object(c.a)(e,"value",this.state.password),e))),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Repeat password"),l.a.createElement(F.a.Control,(t={className:"text-muted",onChange:this.changeHandler,type:this.state.type,name:"password2"},Object(c.a)(t,"onChange",this.changeHandler),Object(c.a)(t,"value",this.state.password2),t))),l.a.createElement(k.a,{style:{margin:"2% 0"}},l.a.createElement(N.a,{className:"center",style:{marginBottom:"3%"}},l.a.createElement(j.a,{variant:"success",onClick:this.handleSubmit}," ",this.state.spinner?l.a.createElement("span",null,l.a.createElement(I,{spinning:"spinning",size:"1x"})):"Save")),l.a.createElement(N.a,{md:1},l.a.createElement("i",{class:"fa fa-check green",style:{display:this.state.match}}),l.a.createElement("i",{class:"fa fa-times red","aria-hidden":"true",style:{display:this.state.noMatch}}))))),l.a.createElement(N.a,{sm:3,md:3})),l.a.createElement(k.a,{className:"center",style:{color:"red"}},l.a.createElement(N.a,null,l.a.createElement("p",null,this.state.error))))}}]),t}(n.Component));function je(e){var t=e.getDate(),a=e.getMonth(),n=e.getYear()-100;return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][a]," ").concat(t," ").concat(n)}var Oe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState(Object(c.a)({error:""},e.target.name,e.target.value),function(){a.state.password===a.state.password2?a.setState({match:"inline",noMatch:"none"}):a.setState({match:"none",noMatch:"inline"})})},a.toggleViewPassword=function(){"password"===a.state.type?a.setState({type:"text"}):a.setState({type:"password"})},a.fileChangeHandler=function(e){var t=e.target.files[0],n=new FormData;n.append("image",t);f.a.put("users/update/image/".concat(a.state.id),n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.setState({data:JSON.stringify(e.data),image:e.data.image})})},a.handleSignUp=function(e){e.preventDefault();var t=je(new Date);if(""!=a.state.password&&""!=a.state.password2){a.setState({loading:!0});var n={username:a.state.username,email:a.state.email,password:a.state.password,joined:t.toString()};f.a.put("/users/signup/".concat(a.state.id),n).then(function(e){a.setState({title:e.data.msg.title,body:e.data.msg.body,btnTxt:e.data.msg.btnTxt,to:e.data.msg.to,email:e.data.email,submitted:!0,loading:!1})})}else a.setState({error:"Please fill out all fields"})},a.state={username:"",image:null,password:"",password2:"",match:"none",noMatch:"none",error:null,redirect:!1,submitted:!1,set:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){if(this.props.location.state){var e=this.props.location.state.id,t=this.props.location.state.email,a=this.props.location.state.set;this.setState({id:e,email:t,set:a})}}},{key:"render",value:function(){var e=this;return this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):this.state.submitted?l.a.createElement(S.a,null,this.state.id,l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,{sm:2}),l.a.createElement(N.a,null,l.a.createElement("h1",null,this.state.title)),l.a.createElement(N.a,{sm:2})),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,{sm:2}),l.a.createElement(N.a,{sm:8},l.a.createElement("h5",null,this.state.body)),l.a.createElement(N.a,{sm:2})),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,{sm:3}),l.a.createElement(N.a,null,l.a.createElement(T.a,{to:{pathname:this.state.to,state:{id:this.state.id}},className:"link-as-button"},this.state.btnTxt)),l.a.createElement(N.a,{sm:3}))):l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"show-grid center",style:{margin:"8% 0 2% 0"}},l.a.createElement(N.a,null,l.a.createElement("h1",null,"Complete Sign Up"))),l.a.createElement(k.a,{className:"show-grid"},l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{sm:3,md:3})),l.a.createElement(k.a,null,l.a.createElement(N.a,{md:4}),l.a.createElement(N.a,null),l.a.createElement(N.a,{md:4})),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:2,md:2}),l.a.createElement(N.a,{sm:8,md:8},l.a.createElement(F.a,null,l.a.createElement(k.a,null,l.a.createElement(N.a,{md:4}),l.a.createElement(N.a,{md:4},l.a.createElement(x.a,{src:this.state.image?this.state.image:"default-avatar.jpg",width:"150px"})),l.a.createElement(N.a,{md:4})),l.a.createElement(k.a,null),l.a.createElement(F.a.Group,{controlId:"formBa/users/signup/${this.state.id}sicName"},l.a.createElement(F.a.Control,{style:{display:"none"},ref:function(t){return e.fileUpload=t},type:"file",onChange:this.fileChangeHandler,id:"image",name:"image"}),l.a.createElement(j.a,{onClick:function(){return e.fileUpload.click()}},"Upload image")),l.a.createElement(F.a.Group,{controlId:"formBasicName"},l.a.createElement(F.a.Label,null,"Username"),l.a.createElement(F.a.Control,{type:"text",placeholder:"Enter a username",onChange:this.changeHandler,name:"username",value:this.state.username})),l.a.createElement(F.a.Group,{controlId:"formBasicEmail"},l.a.createElement(F.a.Label,null,"Email"),l.a.createElement(F.a.Control,{type:"email",placeholder:"Enter your email",name:"email",value:this.state.email})),l.a.createElement(F.a.Group,{controlId:"formBasicPassword"},l.a.createElement(F.a.Label,null,"Password"),l.a.createElement(F.a.Control,{type:"password",placeholder:"Choose a password",onChange:this.changeHandler,name:"password",value:this.state.password})),l.a.createElement(F.a.Group,{controlId:"formBasicPassword"},l.a.createElement(F.a.Label,null,"Repeat Password"),l.a.createElement(F.a.Control,{type:"password",placeholder:"Repeat your password",onChange:this.changeHandler,name:"password2",value:this.state.password2}))))),l.a.createElement(k.a,{className:"center",style:{color:"red",margin:"1em 0"}},l.a.createElement(N.a,null,this.state.error)),l.a.createElement(k.a,null,l.a.createElement(N.a,{md:5}),l.a.createElement(N.a,{md:2,className:"center"},l.a.createElement(j.a,{onClick:this.handleSignUp,variant:"secondary",size:"lg",type:"submit"},"Join")),l.a.createElement(N.a,{md:2,className:"center"},l.a.createElement("i",{class:"fa fa-check green",style:{display:this.state.match}}),l.a.createElement("i",{class:"fa fa-times red","aria-hidden":"true",style:{display:this.state.noMatch}}))))}}]),t}(n.Component),Ce=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!0,msg:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.token;f.a.post("/users/confirmemail/".concat(t)).then(function(t){e.setState({msg:t.data.msg,id:t.data.id,email:t.data.email,loading:!1})}).catch(function(t){e.setState({failed:!0,loading:!1}),console.log(t)})}},{key:"render",value:function(){return l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement("h1",null,this.state.msg.title))),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement("h5",{ytyle:{color:"#2c8139"}},this.state.msg.body))),this.state.msg.showRedirect&&l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,null,l.a.createElement(T.a,{className:"link-as-button",to:{pathname:"/signup",state:{id:this.state.id,email:this.state.email,set:!0}}},this.state.msg.btnTxt))))}}]),t}(n.Component);function Le(e){return l.a.createElement("div",{style:{backgroundImage:"url(assets/topics/".concat(e.topicImage,")"),width:"250px",height:"125px"}},l.a.createElement("div",{style:{background:"rgba(0, 0, 0, 0.3)",width:"250px",height:"125px",color:"#fff",fontSize:"2em",fontWeight:"bold",padding:"1.2em 0",zIndex:"1",boxShadow:"none"},onClick:e.topicHandler,onMouseEnter:e.mouseEnter,onMouseLeave:e.mouseLeave},e.topic))}var Ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!1,saved:!1,chosenTopicsArray:[]},a.toggleHover=function(e){"none"===e.target.style.boxShadow?e.target.style.boxShadow="0px 0px 38px -6px rgba(92,92,92,1)":e.target.style.boxShadow="none"},a.topicHandler=function(e){var t=e.target.textContent.toLowerCase();a.setState({chosenTopicsArray:a.state.chosenTopicsArray.includes(t)?a.state.chosenTopicsArray.filter(function(e){return e!==t}):[].concat(Object(te.a)(a.state.chosenTopicsArray),[t])}),"rgba(0, 0, 0, 0.3)"===e.target.style.backgroundColor?e.target.style.backgroundColor="rgba(255, 0, 0, 0.6)":e.target.style.backgroundColor="rgba(0, 0, 0, 0.3)"},a.saveTopics=function(){var e={topics:a.state.chosenTopicsArray};a.setState({user:e,loading:!0}),f.a.put("/users/choosetopics/".concat(a.state.id),e).then(function(e){a.setState({title:e.data.msg.title,body:e.data.msg.body,to:e.data.msg.to,btnTxt:e.data.msg.btnTxt,loading:!1,saved:!0})})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.location.state&&this.setState({id:this.props.location.state.id,hover:!1})}},{key:"render",value:function(){var e=this;return this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):this.state.saved?l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,{sm:2}),l.a.createElement(N.a,null,l.a.createElement("h1",null,this.state.title)),l.a.createElement(N.a,{sm:2})),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,{sm:2}),l.a.createElement(N.a,{sm:8},l.a.createElement("h5",null,this.state.body)),l.a.createElement(N.a,{sm:2})),l.a.createElement(k.a,{className:"user-message"},l.a.createElement(N.a,{sm:3}),l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/home",className:"link-as-button"},this.state.btnTxt)),l.a.createElement(N.a,{sm:3}))):l.a.createElement(S.a,null,l.a.createElement(k.a,{style:{marginBottom:"4%"}},l.a.createElement(N.a,{className:"center"},l.a.createElement("h1",null,"Tell us a bit about what you're interested in"),l.a.createElement("p",null,"(Choose as many as you like)"))),l.a.createElement(b,null,function(t){return l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridGap:"10px",textAlign:"center",cursor:"pointer"}},t.topics.map(function(t){return l.a.createElement(Le,{topicHandler:e.topicHandler,topic:t.topic,topicImage:t.image,mouseEnter:e.toggleHover,mouseLeave:e.toggleHover})}))))}),l.a.createElement(k.a,{style:{margin:"2% auto"}},l.a.createElement(N.a,null,l.a.createElement(j.a,{variant:"dark",size:"lg",onClick:this.saveTopics},"Save"))))}}]),t}(n.Component);function xe(e){return l.a.createElement(S.a,{style:{margin:"2em 0"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:2,sm:0,xs:0}),l.a.createElement(N.a,{md:3,sm:3,xs:3},l.a.createElement("div",{className:"userPostsItem-image-container"},l.a.createElement(x.a,{src:e.post.image,width:"200px"}))),l.a.createElement(N.a,{md:4,sm:8,xs:6},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h4",{className:"userPostsItem-title"},e.post.title))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"userPostsItem-tagline"},e.post.tagline))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"userPostsItem-date"},e.post.date))),l.a.createElement(k.a,null,l.a.createElement(N.a,{md:4,sm:2,xs:0},l.a.createElement("p",{className:"userPostsItem-views"},e.post.views.length," views")),l.a.createElement(N.a,{md:4,sm:2,xs:0},l.a.createElement("p",{className:"userPostsItem-comments"},e.post.comments," comments")),l.a.createElement(N.a,{md:4,sm:2,xs:0},l.a.createElement("p",{className:"userPostsItem-likes"},e.post.postLikes.length," likes")))),l.a.createElement(N.a,{md:1,sm:1,xs:1},l.a.createElement(k.a,{style:{margin:"1.5em 0"}},l.a.createElement(N.a,null,l.a.createElement(j.a,{variant:"secondary",onClick:function(){return e.editUserArticle(e.post._id)}},"Edit"))))))}var He=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={editing:!1,editedPostId:"",post:"",editedPost:"",userArticles:[],deleting:!1,titleLen:40,taglineLen:40,error:"",redirect:!1},a.changeHandler=function(e){var t;a.setState((t={},Object(c.a)(t,e.target.name,e.target.value),Object(c.a)(t,"titleLen",40-a.state.title.length),Object(c.a)(t,"taglineLen",40-a.state.tagline.length),Object(c.a)(t,"error",""),t))},a.editUserArticle=function(e){a.setState({loading:!0}),f.a.get("/posts/user/post/".concat(e)).then(function(e){a.setState({post:e.data,editedPostId:e.data._id,image:e.data.image,title:e.data.title,tagline:e.data.tagline,topic:e.data.topic,content:e.data.content,editing:!0,loading:!1})})},a.fileChangeHandler=function(e){a.setState({img:e.target.files[0]});var t=new FormData;t.append("image",e.target.files[0]);f.a.put("/posts/user/update/post/image/".concat(a.state.editedPostId),t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.setState({image:e.data.image})})},a.submitUpdatedArticle=function(){if(a.state.title&&a.state.tagline&&a.state.content)if(a.state.title.length<5||a.state.title.length>40||a.state.tagline.length<5||a.state.tagline.length>40)a.setState({error:"The title and tagline should be between 5 and 40 characters long"});else{a.setState({loading:!0});var e={articleId:a.state.editedPostId,title:a.state.title,tagline:a.state.tagline,topic:a.state.topic,content:a.state.content};f.a.put("/posts/user/update/post/getall/".concat(a.props.userId),e).then(function(e){a.setState({userArticles:e.data,editing:!1,error:""})}).catch(function(){a.setState({loading:!1})})}else a.setState({error:"Please fill out all fields"})},a.cancelPostEdit=function(){a.setState({editing:!1,articleId:null,title:null,tagline:null,topic:null,content:null,error:""})},a.deleteUserWarning=function(){a.setState({deleting:!0})},a.closeWarningModal=function(){a.setState({deleting:!1})},a.deleteUserPost=function(e){a.setState({loading:!0}),f.a.delete("/posts/user/delete/post/".concat(a.props.userId),{data:{articleId:e}}).then(function(e){a.setState({userArticles:e.data,editing:!1,deleting:!1,loading:!1})})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.userId!==e.userId&&(this.setState({loading:!0}),f.a.get("/users/userArticles/".concat(this.props.userId)).then(function(e){t.setState({userArticles:e.data,loading:!1})}).catch(function(){t.setState({loading:!1,redirect:!0})}))}},{key:"render",value:function(){var e=this,t=this.state.userArticles.length<1?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"No articles yet :o"),l.a.createElement("p",{style:{margin:"2em 0"}},"Get on and write your first one"),l.a.createElement(j.a,{variant:"success",href:"/createPost"},"Write article")):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Your articles"));return this.state.redirect?l.a.createElement(H.a,{to:"/login"}):this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):l.a.createElement(S.a,null,l.a.createElement(k.a,{style:{margin:"1em 0"}},l.a.createElement(N.a,{className:"center"},t)),l.a.createElement(k.a,{style:{margin:"1em 0"}},l.a.createElement(N.a,null,l.a.createElement("hr",null))),this.state.userArticles.map(function(t){return l.a.createElement(xe,{post:t,editUserArticle:e.editUserArticle})}),l.a.createElement(pe,{show:this.state.editing,editedPostId:this.state.editedPostId,title:this.state.title,image:this.state.image,tagline:this.state.tagline,titleLen:this.state.titleLen,taglineLen:this.state.taglineLen,topic:this.state.topic,content:this.state.content,error:this.state.error,changeHandler:this.changeHandler,fileChangeHandler:this.fileChangeHandler,submitUpdatedArticle:this.submitUpdatedArticle,cancelPostEdit:this.cancelPostEdit,deleteUserWarning:this.deleteUserWarning}),l.a.createElement(he,{editedPostId:this.state.editedPostId,show:this.state.deleting,onHide:this.state.deleting,closeWarningModal:this.closeWarningModal,deleteUserPost:this.deleteUserPost}))}}]),t}(n.Component)),Te=w(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t;a.setState((t={},Object(c.a)(t,e.target.name,e.target.value),Object(c.a)(t,"titleLen",60-a.state.title.length),Object(c.a)(t,"taglineLen",60-a.state.tagline.length),Object(c.a)(t,"error",""),t))},a.handleEditorChange=function(e){a.setState({content:e.target.getContent()})},a.fileChangeHandler=function(e){a.setState({imageFile:e.target.files[0]});var t=new FormData;t.append("image",e.target.files[0]),t.append("articleId",a.state.articleId);f.a.post("/posts/createpost/image",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.setState({data:e.data,image:e.data.image,articleId:e.data._id})})},a.handleSubmitPost=function(e){if(e.preventDefault(),null!=a.state.imageFile)if(a.state.title&&a.state.tagline&&a.state.content)if(a.state.title.length<5||a.state.title.length>60||a.state.tagline.length<5||a.state.tagline.length>60)a.setState({error:"The title and tagline should be between 5 and 40 characters long"});else{var t=je(new Date),n={title:a.state.title,author:a.props.username,authorId:a.props.userId,authorAvatar:a.props.avatarImage,tagline:a.state.tagline,date:t.toString(),topic:a.state.topic,comments:0,content:a.state.content},l=new FormData;for(var r in n)l.append(r,n[r]);l.append("image",a.state.imageFile),a.setState({formData:l,loading:!0}),f.a.put("/posts/createpost/update/".concat(a.state.articleId),l,{headers:{"Content-type":"multipart / form-data"}}).then(function(){a.setState({loading:!1,saved:!0},function(){a.setState({title:"",image:null,tagline:"",topic:"",content:"",error:""})})})}else a.setState({error:"Please fill out all fields"});else a.setState({error:"Don't forget to upload an image for the post"})},a.state=Object(c.a)({articleId:"",authorId:"",title:"",tagline:"",author:"",content:"",imageFile:null,error:"",saved:!1,titleLen:40,taglineLen:40},"error",""),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return null==this.props.isAuth||this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,null)):!1===this.props.isAuth?l.a.createElement(H.a,{to:"/login"}):this.state.saved?l.a.createElement(S.a,{className:"center"},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h1",null,"Post saved"))),l.a.createElement(k.a,{style:{margin:"3em 0"}},l.a.createElement(N.a,null,l.a.createElement(j.a,{href:"/home"},"Ok")))):l.a.createElement(S.a,{key:this.props.isAuth},l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,null,l.a.createElement("h1",null,"Write a new article"))),l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,null,this.state.image?l.a.createElement(x.a,{src:"".concat(this.state.image),style:{margin:"3em 0"},width:"300px"}):"")),l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,null,l.a.createElement("p",{className:"uploaded-create-post-image-text"},this.state.image))),l.a.createElement(k.a,{className:"center",style:{margin:"1.5em 0 0 0"}},l.a.createElement(N.a,null,l.a.createElement("input",{style:{display:"none"},type:"file",onChange:this.fileChangeHandler,ref:function(t){return e.fileInput=t}}),l.a.createElement(j.a,{variant:"secondary",onClick:function(){return e.fileInput.click()}},"Upload image"))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(F.a,{onSubmit:this.handleSubmit},l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Title"),"  ",l.a.createElement("span",{className:"input-chars-remaining"},"characters remaining: ",this.state.titleLen),l.a.createElement(F.a.Control,{className:"text-muted",type:"text",id:"title",name:"title",onChange:this.handleChange,value:this.state.title,placeholder:"Enter a title"})),l.a.createElement(b,null,function(e){return l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Author"),l.a.createElement(F.a.Control,{className:"text-muted",type:"text",id:"author",name:"author",value:e.username}))}),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Tagline"),"    ",l.a.createElement("span",{className:"input-chars-remaining"},"characters remaining: ",this.state.taglineLen),l.a.createElement(F.a.Control,{className:"text-muted",type:"text",id:"tagline",name:"tagline",onChange:this.handleChange,value:this.state.tagline,placeholder:"Enter a description (this will appear in the thumbnail)"})),l.a.createElement(F.a.Group,{controlId:"formGridState"},l.a.createElement(F.a.Label,null,"Topic"),l.a.createElement(F.a.Control,{as:"select",name:"topic",onChange:this.handleChange},l.a.createElement("option",{value:""},"Choose..."),l.a.createElement("option",{value:"tech"},"Tech"),l.a.createElement("option",{value:"language"},"Language"),l.a.createElement("option",{value:"science"},"Science"),l.a.createElement("option",{value:"self"},"Self"),l.a.createElement("option",{value:"society"},"Society"),l.a.createElement("option",{value:"music"},"Music"),l.a.createElement("option",{value:"geography"},"Geography"),l.a.createElement("option",{value:"code"},"Code"),l.a.createElement("option",{value:"nature"},"Nature"),l.a.createElement("option",{value:"health"},"Health"),l.a.createElement("option",{value:"psych"},"Psych"),l.a.createElement("option",{value:"food"},"food"),l.a.createElement("option",{value:"relationships"},"relationships"))),l.a.createElement(F.a.Group,{controlId:"post_content"},l.a.createElement(F.a.Label,null,"Post"),l.a.createElement(de.a,{init:{plugins:"link image code",toolbar:"undo redo | bold italic | alignleft aligncenter alignright | code",height:400},id:"content",onChange:this.handleEditorChange,name:"content",value:this.state.content,placeholder:"Write your post"})),l.a.createElement(j.a,{onClick:this.handleSubmitPost},"Save"),l.a.createElement("span",{className:"center create-post-error"},this.state.error)))))}}]),t}(n.Component));function Pe(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{style:{margin:"1.5em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,{md:3},l.a.createElement("div",{className:"savedPostsFeedItem-image-container"},l.a.createElement(x.a,{src:e.post.image,width:"200px"}))),l.a.createElement(N.a,{md:4},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h4",{className:"savedPostsFeedItem-title"},e.post.title))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"savedPostsFeedItem-tagline"},e.post.tagline))),l.a.createElement(k.a,{style:{marginTop:"0.5em",marginBottom:"0.5em"}},l.a.createElement(N.a,null,l.a.createElement("div",{className:"savedPostsFeedItem-date"},e.post.author))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("p",{className:"savedPostsFeedItem-views"},e.post.date)))),l.a.createElement(N.a,{md:3},l.a.createElement(k.a,{style:{margin:"1.5em 0"}},l.a.createElement(N.a,null,l.a.createElement(j.a,{variant:"danger",onClick:function(){return e.removeSavedArticle(e.post._id)}},"Remove"))))))}var Fe=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={savedArticles:[],redirect:!1},a.removeSavedArticle=function(e){var t={name:"saved_articles",toToggle:e};f.a.put("/users/update/savedarticles/".concat(a.props.userId),t).then(function(){return a.getSavedArticles()})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.userId!==e.userId&&(this.setState({loading:!0}),this.getSavedArticles())}},{key:"getSavedArticles",value:function(){var e=this;this.setState({loading:!0}),f.a.post("/users/savedarticles/".concat(this.props.userId),{name:"saved_articles"}).then(function(t){e.setState({savedArticles:t.data,loading:!1})}).catch(function(t){e.setState({loading:!1,redirect:!0})})}},{key:"render",value:function(){var e=this;return this.state.redirect?l.a.createElement(H.a,{to:"/login"}):this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):l.a.createElement(S.a,null,l.a.createElement("h1",{className:"center",style:{margin:"1em 0"}},"Saved articles"),l.a.createElement(k.a,{style:{margin:"1em 0"}},l.a.createElement(N.a,null,l.a.createElement("hr",null))),this.state.savedArticles.map(function(t){return l.a.createElement(Pe,{post:t,removeSavedArticle:e.removeSavedArticle})}))}}]),t}(n.Component)),Ue=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={error:null,editing:!1,type:"password",password:"",password2:"",match:"none",noMatch:"none",topics:[],userInterests:[]},a.changeHandler=function(e){a.setState(Object(c.a)({error:""},e.target.name,e.target.value),function(){a.state.password===a.state.password2?a.setState({match:"inline",noMatch:"none"}):a.setState({match:"none",noMatch:"inline"})})},a.toggleViewPassword=function(){"password"===a.state.type?a.setState({type:"text"}):a.setState({type:"password"})},a.toggleEdit=function(){a.setState({editing:!a.state.editing})},a.interestHandler=function(e){var t=e.target.value;a.setState({userInterests:a.state.userInterests.includes(t)?a.state.userInterests.filter(function(e){return e!==t}):[].concat(Object(te.a)(a.state.userInterests),[t])})},a.fileChangeHandler=function(e){var t=e.target.files[0],n=new FormData;n.append("image",t);f.a.put("/users/update/".concat(a.state.id),n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.setState({message:"done",image:e.data.image})})},a.handleSubmit=function(e){e.preventDefault();var t={username:a.state.username,email:a.state.email,password:a.state.password,image:a.state.image,topics:JSON.stringify(a.state.userInterests)};a.setState({test:JSON.stringify(t)});var n=new FormData;for(var l in t)n.append(l,t[l]);f.a.put("/users/update/".concat(a.state.id),n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){200===e.status&&a.setState({data:JSON.stringify(e.data),username:e.data.username,email:e.data.email,image:e.data.image,editing:!1,userInterests:e.data.topics.map(function(e){return e.toLowerCase()})})}).catch(function(e){a.setState({error:"There was a problem fetching your details..."})})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.a.get("/users/").then(function(t){e.setState({id:t.data.user._id,username:t.data.user.username,email:t.data.user.email,password:null,image:t.data.user.image,userInterests:t.data.user.topics.map(function(e){return e.toLowerCase()})})}).catch(function(t){e.setState({error:"There was a problem fetching your details..."})})}},{key:"render",value:function(){var e=this;if(null==this.props.isAuth)return l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,null));if(!1===this.props.isAuth)return l.a.createElement(H.a,{to:"/login"});var t=this.state.editing?l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:"center",style:{margin:"3em 0"}},l.a.createElement(N.a,null,l.a.createElement("input",{style:{display:"none"},type:"file",onChange:this.fileChangeHandler,ref:function(t){return e.fileInput=t}}),l.a.createElement(j.a,{onClick:function(){return e.fileInput.click()}},"Update profile image"))),l.a.createElement(k.a,null,l.a.createElement(N.a,{sm:3,md:3}),l.a.createElement(N.a,{sm:6,md:6},l.a.createElement(F.a,null,l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Username"),l.a.createElement(F.a.Control,{className:"text-muted",type:"text",id:"username",name:"username",onChange:this.changeHandler,value:this.state.username})),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Email"),l.a.createElement(F.a.Control,{className:"text-muted",type:"email",id:"email",name:"email",onChange:this.changeHandler,value:this.state.email})),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Change Password"),this.state.password&&l.a.createElement("span",{style:{margin:"0 2em",color:"8e8e8e",fontSize:"0.8em",textDecoration:"underline",cursor:"pointer"},onClick:this.toggleViewPassword},"view"),l.a.createElement("i",{class:"fa fa-check green fa-xs",style:{display:this.state.match}}),l.a.createElement("i",{class:"fa fa-times red","aria-hidden":"true",style:{display:this.state.noMatch}}),l.a.createElement(F.a.Control,{className:"text-muted",type:this.state.type,id:"password",name:"password",onChange:this.changeHandler,value:this.state.password})),l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Repeat New Password"),"   ",l.a.createElement("i",{class:"fa fa-check green",style:{display:this.state.match}}),l.a.createElement("i",{class:"fa fa-times red","aria-hidden":"true",style:{display:this.state.noMatch}}),l.a.createElement(F.a.Control,{className:"text-muted",type:this.state.type,id:"password2",name:"password2",onChange:this.changeHandler,value:this.state.password2})),l.a.createElement(k.a,{style:{margin:"3em 0 1.5em 0"}},l.a.createElement(N.a,null,l.a.createElement("h3",null,"Your interests"))),l.a.createElement(b,null,function(t){return l.a.createElement(k.a,null,l.a.createElement(N.a,null,t.topics.map(function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"checkbox",onChange:e.interestHandler,value:t.value,checked:e.state.userInterests.includes(t.value)}),l.a.createElement("span",{style:{marginLeft:"2em"}},t.topic),l.a.createElement("br",null))})))}),l.a.createElement(k.a,{style:{margin:"3em 0"}},l.a.createElement(N.a,null),l.a.createElement(N.a,{className:"center",md:2},l.a.createElement(j.a,{onClick:this.handleSubmit},"Update"))))),l.a.createElement(N.a,{sm:3,md:3}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{className:"center",style:{margin:"3em 0"}},l.a.createElement(N.a,{md:3}),l.a.createElement(N.a,null,l.a.createElement("p",null,this.state.username)),l.a.createElement(N.a,{md:3})),l.a.createElement(k.a,{className:"center",style:{margin:"3em 0"}},l.a.createElement(N.a,{md:3}),l.a.createElement(N.a,null,l.a.createElement("p",null,this.state.email)),l.a.createElement(N.a,{md:3})),l.a.createElement(k.a,{className:"center",style:{margin:"3em 0"}},l.a.createElement(N.a,null,l.a.createElement("h5",{style:{color:"#4d72ad"}},"Your interests"),l.a.createElement("hr",null),l.a.createElement("p",null,this.state.userInterests.map(function(e){return l.a.createElement("p",{style:{margin:"1em 0",fontSize:"1.2em",color:"#a1a1a1"}},e)})))),l.a.createElement(k.a,{className:"center",style:{margin:"3em 0"}},l.a.createElement(N.a,{md:3}),l.a.createElement(N.a,null,l.a.createElement(j.a,{onClick:this.toggleEdit},"Edit")),l.a.createElement(N.a,{md:3})));return l.a.createElement(S.a,null,l.a.createElement(k.a,{style:{marginBottom:"3em"}},l.a.createElement(N.a,{className:"center"},l.a.createElement("h1",null,"Edit Profile"))),l.a.createElement(k.a,{className:"center"},l.a.createElement(N.a,null,l.a.createElement("div",{className:"profile-page-avatar-container"},l.a.createElement(x.a,{src:this.state.image,width:"200px"})))),t)}}]),t}(n.Component));function _e(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{style:{margin:"1.5em 0"}},l.a.createElement(N.a,{lg:0,md:0,sm:0,xs:0}),l.a.createElement(N.a,{lg:4,md:5,sm:5,xs:6},l.a.createElement("div",{className:"userHistoryItem-image-container"},l.a.createElement(x.a,{src:e.post.image,width:"200px"}))),l.a.createElement(N.a,{lg:4,md:5,sm:5,xs:6},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h4",{className:"userHistoryItem-title"},e.post.title))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"userHistoryItem-tagline"},e.post.tagline))),l.a.createElement(k.a,{style:{marginTop:"0.5em",marginBottom:"0.5em"}},l.a.createElement(N.a,null,l.a.createElement("div",{className:"userHistoryItem-date"},e.post.author))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("p",{className:"userHistoryItem-views"},e.post.date)))),l.a.createElement(N.a,{lg:3,md:3,sm:2,xs:12},l.a.createElement(k.a,{style:{margin:"1.5em 0"}},l.a.createElement(N.a,null,l.a.createElement(j.a,{variant:"danger",onClick:function(){return e.deleteHistoryItem(e.post._id)}},"Remove"))))))}var De=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={readingHistory:[],redirect:!1},a.deleteHistoryItem=function(e){a.setState({loading:!0}),f.a.put("/users/delete/readinghistory/".concat(a.props.userId),{articleId:e}).then(function(e){a.setState({readingHistory:e.data,loading:!1})}).catch(function(){a.setState({loading:!1})})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.userId!==e.userId&&(this.setState({loading:!0}),f.a.post("/users/readinghistory/".concat(this.props.userId),{name:"reading_history"}).then(function(e){t.setState({readingHistory:e.data,loading:!1})}).catch(function(e){t.setState({loading:!1,redirect:!0})}))}},{key:"render",value:function(){var e=this;return this.state.redirect?l.a.createElement(H.a,{to:"/login"}):this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{size:2})):l.a.createElement(S.a,null,l.a.createElement("h1",{className:"center",style:{margin:"0 0 1em 0"}},"Your reading history"),l.a.createElement(k.a,{style:{margin:"1em 0"}},l.a.createElement(N.a,null,l.a.createElement("hr",null))),this.state.readingHistory.length>0&&this.state.readingHistory.map(function(t){return l.a.createElement(_e,{post:t,deleteHistoryItem:e.deleteHistoryItem})}))}}]),t}(n.Component)),ze=a(76),Re=function(e){var t=e.user.hasOwnProperty("unfollowed");return l.a.createElement(j.a,{variant:t?"secondary":"success",onClick:e.handleFollow},t?"usubscribed":"subscribed")};function Me(e){return l.a.createElement(S.a,null,l.a.createElement(k.a,{style:{borderBottom:"1px dotted #c5c5c5",padding:"1em 0"}},l.a.createElement(N.a,{md:2}),l.a.createElement(N.a,{md:3},l.a.createElement("div",{className:"followingFeedItem-image-container"},l.a.createElement(x.a,{src:"/".concat(e.user.image),width:"170px"}))),l.a.createElement(N.a,{md:4,style:{padding:"1.3em 0 0 0"}},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h5",{className:"followingFeedItem-username"},e.user.username))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("p",{className:"followingFeedItem-date"},"Date joined: ".concat(e.user.joined))))),l.a.createElement(N.a,{style:{padding:"1.5em 0 0 0"}},e.user&&l.a.createElement(Re,{handleFollow:function(){return e.handleFollow(e.user)},user:e.user}))))}function We(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Be=w(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).get_following=function(){a.setState({loading:!0}),f.a.post("/users/following/".concat(a.props.userId),{name:"following"}).then(function(e){a.setState({loading:!1,following:e.data,userOrError:!1})}).catch(function(e){a.setState({redirect:!0,loading:!1})})},a.handleFollow=function(e){var t={toFollow:e._id};f.a.put("/users/update/following/".concat(a.props.userId),t).then(a.setState({following:a.state.following.map(function(t){return e._id===t._id?!0===e.unfollowed?function(e,t){e[t];return Object(ze.a)(e,[t].map(We))}(t,"unfollowed"):Object(ee.a)({},e,{unfollowed:!0}):t})}))},a.state={following:[],redirect:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.userId!==e.userId&&this.get_following()}},{key:"render",value:function(){var e=this;return this.state.redirect?l.a.createElement(H.a,{to:"/login"}):this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,null)):l.a.createElement(S.a,null,l.a.createElement(k.a,{className:"center",style:{margin:"4em 0"}},l.a.createElement(N.a,null,l.a.createElement("h1",{className:"default-page-header"},"Who you're following"))),this.state.following.map(function(t){return l.a.createElement(k.a,null,l.a.createElement(Me,{user:t,handleFollow:e.handleFollow}))}))}}]),t}(n.Component));var Ge=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"   fa fa-bookmark-o bookmark-icon":"   fa fa-bookmark bookmark-icon",i:!0,d:e.post._id,s:!0,tyle:{cursor:"pointer"},o:!0,nClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(S.a,{style:{margin:"2.5em",borderBottom:"1px dotted #c5c5c5"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:5},l.a.createElement(k.a,null,l.a.createElement(N.a,{md:10},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h4",{className:"popularFeedItem-title"},e.post.title))),l.a.createElement(N.a,{md:1},t)),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"popularFeedItem-tagline"},e.post.tagline))),l.a.createElement(k.a,{style:{marginTop:"0.5em",marginBottom:"0.5em"}},l.a.createElement(N.a,{md:8},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement(G,{post:e.post}))))),l.a.createElement(N.a,{md:3},l.a.createElement("div",{className:"popularFeedItem-image-container"},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement(x.a,{src:e.post.image,width:"200px"}))))))});var qe=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(S.a,null,l.a.createElement(k.a,{style:{margin:"0 0 2em 0"}},l.a.createElement(N.a,{md:8},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"popularHeaderPost-image-container"},l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement(x.a,{src:"/".concat(e.post.image),width:"100%"})))))),l.a.createElement(N.a,{md:4},l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h1",{className:"popularHeaderPost-page-title"},e.pageTitle))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("p",{className:"popularHeaderPost-page-tagline"},e.pageTagline))))),l.a.createElement(k.a,null,l.a.createElement(N.a,{md:4},l.a.createElement(k.a,{style:{margin:"0.5em 0 0 0"}},l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("h3",{className:"popularHeaderPost-title"},e.post.title)))),l.a.createElement(k.a,{style:{margin:"0 0 0 0"}},l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/readpost/".concat(e.post._id)},l.a.createElement("p",{className:"popularHeaderPost-tagline"},"".concat(e.post.tagline)))))),l.a.createElement(N.a,{md:3},l.a.createElement(G,{post:e.post})),l.a.createElement(N.a,{md:1,style:{marginTop:"0.5em"}},t)))}),Ve=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={popularPosts:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),f.a.get("/posts/popular/").then(function(t){e.setState({popularPosts:t.data,loading:!1})})}},{key:"render",value:function(){var e=this;return this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{className:"spinner",size:"2x",spinning:"spinning"})):l.a.createElement(S.a,null,this.state.popularPosts.length<1?"No posts on this topic yet...":l.a.createElement(k.a,{style:{margin:"3em 0"}},l.a.createElement(N.a,null,l.a.createElement(qe,{pageTitle:"Popular on our site",pageTagline:"All the stuff from our interwebs",post:this.state.popularPosts[0],savedArticles:this.props.savedArticles,toggleSaveHandler:this.props.toggleSaveHandler,isAuth:this.props.isAuth}))),l.a.createElement("hr",null),this.state.popularPosts.slice(1).map(function(t){return l.a.createElement(Ge,{post:t,savedArticles:e.props.savedArticles,toggleSaveHandler:e.props.toggleSaveHandler,isAuth:e.props.isAuth})}))}}]),t}(n.Component));var Je=w(function(e){var t=e.savedArticles&&e.isAuth?l.a.createElement("i",{class:-1===e.savedArticles.indexOf(e.post._id)?"fa fa-bookmark-o bookmark-icon":"fa fa-bookmark bookmark-icon",id:e.post._id,style:{cursor:"pointer"},onClick:function(){return e.toggleSaveHandler(e.post._id)}}):"";return l.a.createElement(S.a,{className:"PersonalizedFeedItem-container",style:{border:"1px dotted #c6c6c6"}},l.a.createElement(k.a,null,l.a.createElement(N.a,{style:{padding:"0"}},l.a.createElement("div",{className:"PersonalizedFeedItem-image",style:{margin:"0",width:"100%",height:"170px",overflow:"hidden"}},l.a.createElement(T.a,{to:"/".concat(e.post._id)},l.a.createElement(x.a,{src:e.post.image,width:"100%"}))))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("p",{className:"PersonalizedFeedItem-topic",style:{color:"#838383",fontSize:"0.8em",margin:"0.6em 0"}},e.post.topic))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{to:"/".concat(e.post._id)},l.a.createElement("h4",{className:"PersonalizedFeedItem-title",style:{fontSize:"1.2em",fontWeight:"bold",margin:"0.2em 0"}},e.post.title)))),l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("div",{className:"PersonalizedFeedItem-tagline",style:{fontSize:"0.8em",color:"#838383",margin:"0.6em 0"}},e.post.tagline))),l.a.createElement(k.a,{className:"PersonalizedFeedItem-author",style:{marginBottom:"1em"}},l.a.createElement(N.a,null,l.a.createElement(G,{post:e.post})),l.a.createElement(N.a,{md:2,style:{margin:"2.5em 0 0 0"}},t)))}),Ye=w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={personalizedPosts:[],redirect:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),f.a.get("/users/").then(function(t){var a=JSON.stringify(t.data.user.topics);f.a.get("/posts/personalized/".concat(a)).then(function(t){e.setState({personalizedPosts:t.data,loading:!1})})}).catch(function(t){e.setState({loading:!1,redirect:!0})})}},{key:"render",value:function(){var e=this;return this.state.redirect?l.a.createElement(H.a,{to:"/login"}):this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,null)):l.a.createElement(S.a,null,l.a.createElement(k.a,null,l.a.createElement(N.a,null,l.a.createElement("h2",null,"Personalized posts"))),l.a.createElement(k.a,{style:{margin:"1.2em 0"}},this.state.personalizedPosts.length>0&&this.state.personalizedPosts.map(function(t,a){return l.a.createElement(N.a,{md:4,style:{margin:"1.5em 0"}},l.a.createElement(Je,{post:t,isAuth:e.props.isAuth,toggleSaveHandler:e.props.toggleSaveHandler,savedArticles:e.props.savedArticles}))})))}}]),t}(n.Component)),$e=(a(126),a(127),a(128),a(129),a(130),a(131),a(132),w(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!0,redirectTo:null,loginWarning:!1,submitted:!1},a.getUser=function(){f.a.defaults.withCredentials=!0,f.a.get("/users/",{withCredentials:!0}).then(function(e){e.data.user?(a.setState({savedArticles:e.data.user.saved_articles,loading:!1}),a.props.updateUser({isAuth:!0,avatarImage:e.data.user.image,userId:e.data.user._id,username:e.data.user.username})):a.props.updateUser({isAuth:!1,loading:!1})}).catch(function(e){a.props.user({isAuth:!1,userId:null,username:null,loading:!1})})},a.getFollowedUsers=function(){f.a.post("/users/following/".concat(a.props.userId),{name:"following"}).then(function(e){a.setState({followedUsers:e.data})}).catch(function(e){a.setState({error:"There was an error fetching your follwed users"})})},a.warnLogin=function(){a.setState({loginWarning:!a.state.loginWarning})},a.changeHandler=function(e){var t;a.setState((t={},Object(c.a)(t,e.target.name,e.target.value),Object(c.a)(t,"error",""),t))},a.handleUserLogin=function(e){e.preventDefault(),a.setState({loading:!0});var t={email:a.state.email,password:a.state.password};f.a.post("/users/login",t).then(function(e){200===e.status&&(a.props.updateUser({username:e.data.user.username,author:e.data.user.author,userId:e.data.user._id,isAuth:!0,avatarImage:e.data.user.image}),a.setState({redirectTo:!0,loading:!1}))}).catch(function(e){a.setState({isAuth:!1,error:"There was a problem: Please check your login details.",password:"",loading:!1})})},a.handleUserSignup=function(e){e.preventDefault();if(/^\S+@\S+$/.test(a.state.email)){a.setState({sendingEmail:!0});var t={email:a.state.email};f.a.post("/users/sendemail",t).then(function(e){a.setState({msg:e.data.msg,email:e.data.email,submitted:!0,sendingEmail:!1})}).catch(function(e){return console.log(e)})}else a.setState({error:"Please enter a valid email"})},a.handleUserLogout=function(){a.setState({spinner:!0}),f.a.post("/users/logout").then(function(e){200===e.status&&(a.props.updateUser({username:null,userId:null,isAuth:!1}),a.setState({loading:!1}))}).catch(function(e){console.log("There was an error: ".concat(e)),a.setState({data:e,loading:!1})})},a.getComments=function(){f.a.get("/comments/")},a.toggleSidebar=function(){a.setState({showSidebar:!a.state.showSidebar}),"hidden"===document.body.style.overflow?document.body.style.overflow="visible":document.body.style.overflow="hidden"},a.toggleSaveHandler=function(e){a.setState({savedArticle:e});var t={toToggle:e,name:"saved_articles"};f.a.put("/users/update/savedArticles/".concat(a.props.userId),t).then(function(e){a.setState({savedArticles:e.data.saved_articles})})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getUser(),this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e){this.props.userId!==e.userId&&this.getFollowedUsers()}},{key:"render",value:function(){var e=this;return this.state.loading?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(I,{className:"spinner",size:"2x",spinning:"spinning"})):l.a.createElement(p.a,null,l.a.createElement("div",null,l.a.createElement(W,{handleUserLogout:this.handleUserLogout,warnLogin:this.warnLogin,loginWarning:this.state.loginWarning,handleUserLogin:this.handleUserLogin,error:this.state.error,redirectTo:this.state.redirectTo,handleUserSignup:this.handleUserSignup,changeHandler:this.changeHandler,msg:this.state.msg,email:this.state.email,submitted:this.state.submitted,sendingEmail:this.state.sendingEmail,followedUsers:this.state.followedUsers,showSidebar:this.state.showSidebar,toggleSidebar:this.toggleSidebar}),l.a.createElement(h.a,null,l.a.createElement(g.a,{exact:!0,path:"/confirm/:token",component:Ce}),l.a.createElement(g.a,{path:"/checkemail",component:Se}),l.a.createElement(g.a,{path:"/forgotpassword",component:Ne}),l.a.createElement(g.a,{path:"/choosetopics",component:Ae}),l.a.createElement(g.a,{exact:!0,path:"/",component:X}),l.a.createElement(g.a,{exact:!0,path:"/home",component:X}),l.a.createElement(g.a,{exact:!0,path:"/topic/:topic",render:function(t){return l.a.createElement(ve,Object.assign({},t,{savedArticles:e.state.savedArticles,toggleSaveHandler:e.toggleSaveHandler}))}}),l.a.createElement(g.a,{path:"/login",render:function(t){return l.a.createElement(ke,Object.assign({},t,{handleUserLogin:e.handleUserLogin,redirectTo:e.state.redirectTo,changeHandler:e.changeHandler}))}}),l.a.createElement(g.a,{exact:!0,path:"/signup",component:Oe}),l.a.createElement(g.a,{path:"/termsandconditions",component:ye}),l.a.createElement(g.a,{path:"/about",component:Z}),l.a.createElement(g.a,{path:"/createpost",render:function(){return l.a.createElement(Te,{isAuth:e.state.isAuth})}}),l.a.createElement(g.a,{path:"/savedposts",render:function(t){return l.a.createElement(Fe,Object.assign({},t,{savedArticles:e.state.savedArticles,toggleSaveHandler:e.toggleSaveHandler}))}}),l.a.createElement(g.a,{exact:!0,path:"/userposts",render:function(t){return l.a.createElement(He,Object.assign({},t,{userPosts:e.state.userPosts}))}}),l.a.createElement(g.a,{path:"/setnewpassword/:token",component:Ie}),l.a.createElement(g.a,{path:"/editprofile",component:Ue}),l.a.createElement(g.a,{path:"/profile/:id",component:we}),l.a.createElement(g.a,{exact:!0,path:"/personalized",render:function(t){return l.a.createElement(Ye,Object.assign({},t,{savedArticles:e.state.savedArticles,toggleSaveHandler:e.toggleSaveHandler}))}}),l.a.createElement(g.a,{exact:!0,path:"/popular",render:function(t){return l.a.createElement(Ve,Object.assign({},t,{savedArticles:e.state.savedArticles,toggleSaveHandler:e.toggleSaveHandler}))}}),l.a.createElement(g.a,{exact:!0,path:"/followedusers",component:Be}),l.a.createElement(g.a,{exact:!0,path:"/userhistory",component:De}),l.a.createElement(g.a,{exact:!0,path:"/readpost/:id",render:function(t){return l.a.createElement(ge,Object.assign({},t,{warnLogin:e.warnLogin}))}}),l.a.createElement(g.a,{path:"/",component:O})),l.a.createElement(B,null)))}}]),t}(n.Component)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(y,null,l.a.createElement($e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e,t,a){e.exports=a(133)},82:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.bde099ee.chunk.js.map